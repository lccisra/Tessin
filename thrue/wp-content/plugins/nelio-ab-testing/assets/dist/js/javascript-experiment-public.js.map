{"version":3,"file":"js/javascript-experiment-public.js","mappings":";;;;;;;;;;;;;;;;;;;AAAA;;;AAGiD;AACE;AAEnD;;;AAGsB;AAI0B;AAG1C,SAAUI,uBAAuBA,CACtCC,WAA8B;EAE9BH,2EAAoB,EAAE;EACtBC,2EAAoB,CAAE,0BAA0B,CAAE;EAElDE,WAAW,CAACC,GAAG,CAAE;IAAM,YAAK,IAAI;EAAT,CAAS,EAAE;IAAEN,QAAQ,EAAAA,iEAAAA;EAAA,CAAE,CAAE;EAEhD,IAAMO,KAAK,GAAGN,iEAAY,CAAEO,QAAQ,CAACC,QAAQ,CAACC,IAAI,CAAE,CACnD,0BAA0B,CACL;EACtB,IAAKH,KAAK,EAAG;IACZP,qEAAQ,CAAE;MACT,OAAAG,2EAAoB,CAAE,0BAA0B,EAAEI,KAAK,CAAE;IAAzD,CAAyD,CACzD;GACD,CAAC;AACH,CAAC,CAAC;;;;;;;;;;;;;;;;;;;;AChCF;;;AAGqC;AACO;AAC5C,iEAAeP,6DAAQ;;;;;;;;;;;;;;;;;ACLvB;;;;;;;;;;;;;;;;;;;;;;ACAA;;;AAGmD;AAE7C,SAAUY,cAAcA,CAAEC,IAAY;EAC3C,OAAOF,iEAAY,CAAEE,IAAI,EAAE;IAC1BC,UAAU,EAAE,kBAAkB;IAC9BC,UAAU,EAAE,QAAQ;IACpBC,YAAY,EAAE;GACd,CAAE;AACJ,CAAC,CAAC;AAEI,SAAUC,cAAcA,CAAEJ,IAAY;EAC3C;EACA,IAAK,CAAE,cAAc,CAACK,IAAI,CAAEL,IAAI,CAAE,EAAG;IACpC,OAAO,KAAK;GACZ,CAAC;EAEFA,IAAI,GAAGA,IAAI,CAACM,OAAO,CAAE,cAAc,EAAE,SAAS,CAAE;EAChD,IAAMC,aAAa,GAAGZ,QAAQ,CAACC,QAAQ,CAACC,IAAI,CAC1CS,OAAO,CAAE,cAAc,EAAE,EAAE,CAAE,CAC7BA,OAAO,CAAE,OAAO,EAAE,EAAE,CAAE;EACxB,IAAK,CAAC,KAAKN,IAAI,CAACQ,OAAO,CAAE,SAAS,GAAGD,aAAa,CAAE,EAAG;IACtD,OAAO,KAAK;GACZ,CAAC;EAEF,OAAO,IAAI;AACZ,CAAC,CAAC;AAEI,SAAUlB,oBAAoBA,CAAA;EACnCoB,KAAK,CAACC,IAAI,CAAEf,QAAQ,CAACgB,gBAAgB,CAAE,GAAG,CAAE,CAAE,CAACC,OAAO,CAAE,UAAEZ,IAAI;IAC7D,IAAMH,IAAI,GAAGG,IAAI,CAACa,YAAY,CAAE,MAAM,CAAE,IAAI,EAAE;IAC9C,IAAK,CAAET,cAAc,CAAEP,IAAI,CAAE,EAAG;MAC/B;KACA,CAAC;IAEFG,IAAI,CAACc,SAAS,CAACC,GAAG,CAAE,mBAAmB,CAAE;IACzCf,IAAI,CAACgB,gBAAgB,CAAE,OAAO,EAAE,UAAEC,EAAE;MAAM,OAAAA,EAAE,CAACC,cAAc,EAAE;IAAnB,CAAmB,CAAE;EAChE,CAAC,CAAE;AACJ,CAAC,CAAC;AAEI,SAAU5B,oBAAoBA,CACnC6B,SAAiB,EACjBC,UAAsC;EAEtCX,KAAK,CAACC,IAAI,CAAEf,QAAQ,CAACgB,gBAAgB,CAAE,GAAG,CAAE,CAAE,CAACC,OAAO,CAAE,UAAEZ,IAAI;;IAC7D,IAAMH,IAAI,GAAGG,IAAI,CAACa,YAAY,CAAE,MAAM,CAAE,IAAI,EAAE;IAC9C,IAAKT,cAAc,CAAEP,IAAI,CAAE,EAAG;MAC7B;KACA,CAAC;IAEF;IACA,IAAMwB,QAAQ,GAAGxB,IAAI,CAACS,OAAO,CAAE,MAAM,EAAE,EAAE,CAAE;IAC3C,IAAMgB,QAAQ,GAAGzB,IAAI,CAACS,OAAO,CAAE,QAAQ,EAAE,EAAE,CAAE;IAC7C,IAAMiB,QAAQ,GACbzB,iEAAY,CAAEuB,QAAQ,GAAAG,EAAA,OAAIA,EAAA,CAAEL,SAAS,IAAIC,UAAU,aAAVA,UAAU,cAAVA,UAAU,GAAI,EAAE,EAAAI,EAAA,EAAI,GAC7DF,QAAQ;IAETtB,IAAI,CAACyB,YAAY,CAAE,MAAM,EAAEF,QAAQ,CAAE;EACtC,CAAC,CAAE;AACJ,CAAC,CAAC;;;;;;;;;;;;AC7DF;;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;UCAA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA;WACA,iCAAiC,WAAW;WAC5C;WACA;;;;;WCPA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;;;;;;;;;;;;;;;;;;;ACDA;;;AAGiE;AAEjE,IAAMG,MAAM,GAAG,SAAAA,CAAEC,CAAU;EAC1B,QAAC,CAAEA,CAAC,IAAI,QAAQ,KAAK,OAAOA,CAAC,IAAI,KAAK,IAAIA,CAAC;AAA3C,CAA2C;AAE5C;AACEC,MAAuB,CAACC,GAAG,GAAAC,QAAA,CAAAA,QAAA,KACvBJ,MAAM,CAAEE,MAAM,CAAE,GAAGA,MAAM,CAACC,GAAG,GAAG,EAAI;EACzCtC,uBAAuB,EAAAA,0EAAAA;AAAA,EACvB,C","sources":["webpack://nab/./includes/hooks/experiments/javascript/assets/javascript-previewer/index.ts","webpack://nab/./packages/safe-wordpress/dom-ready.ts","webpack://nab/./packages/safe-wordpress/url.ts","webpack://nab/./packages/utils/links.ts","webpack://nab/./includes/hooks/experiments/javascript/assets/javascript-previewer/style.scss?0b33","webpack://nab/external window [\"wp\",\"domReady\"]","webpack://nab/external window [\"wp\",\"url\"]","webpack://nab/webpack/bootstrap","webpack://nab/webpack/runtime/compat get default export","webpack://nab/webpack/runtime/define property getters","webpack://nab/webpack/runtime/hasOwnProperty shorthand","webpack://nab/webpack/runtime/make namespace object","webpack://nab/./includes/hooks/experiments/javascript/assets/public.ts"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport domReady from '@safe-wordpress/dom-ready';\nimport { getQueryArgs } from '@safe-wordpress/url';\n\n/**\n * Internal dependencies\n */\nimport './style.scss';\nimport {\n\tdisableExternalLinks,\n\taddParamToLocalLinks,\n} from '../../../../../../packages/utils/links';\nimport type { ScriptAlternative } from '../../../../../../assets/src/public/types';\n\nexport function initJavaScriptPreviewer(\n\talternative: ScriptAlternative\n): void {\n\tdisableExternalLinks();\n\taddParamToLocalLinks( 'nab-javascript-previewer' );\n\n\talternative.run( () => void null, { domReady } );\n\n\tconst value = getQueryArgs( document.location.href )[\n\t\t'nab-javascript-previewer'\n\t] as unknown as string;\n\tif ( value ) {\n\t\tdomReady( () =>\n\t\t\taddParamToLocalLinks( 'nab-javascript-previewer', value )\n\t\t);\n\t} //end if\n} //end initJavaScriptPreviewer()\n","/**\n * WordPress dependencies\n */\nexport * from '@wordpress/dom-ready';\nimport domReady from '@wordpress/dom-ready';\nexport default domReady;\n","/**\n * WordPress dependencies\n */\nexport * from '@wordpress/url';\n","/**\n * WordPress dependencies\n */\nimport { addQueryArgs } from '@safe-wordpress/url';\n\nexport function addFreeTracker( link: string ): string {\n\treturn addQueryArgs( link, {\n\t\tutm_source: 'nelio-ab-testing',\n\t\tutm_medium: 'plugin',\n\t\tutm_campaign: 'free',\n\t} );\n} //end addFreeTracker()\n\nexport function isExternalLink( link: string ): boolean {\n\t// Internal link.\n\tif ( ! /^[a-z]+:\\/\\//.test( link ) ) {\n\t\treturn false;\n\t} //end if\n\n\tlink = link.replace( /^https?:\\/\\//, 'http://' );\n\tconst currentDomain = document.location.href\n\t\t.replace( /^https?:\\/\\//, '' )\n\t\t.replace( /\\/.*$/, '' );\n\tif ( 0 === link.indexOf( 'http://' + currentDomain ) ) {\n\t\treturn false;\n\t} //end if\n\n\treturn true;\n} //end isExternalLink()\n\nexport function disableExternalLinks(): void {\n\tArray.from( document.querySelectorAll( 'a' ) ).forEach( ( link ) => {\n\t\tconst href = link.getAttribute( 'href' ) || '';\n\t\tif ( ! isExternalLink( href ) ) {\n\t\t\treturn;\n\t\t} //end if\n\n\t\tlink.classList.add( 'nab-disabled-link' );\n\t\tlink.addEventListener( 'click', ( ev ) => ev.preventDefault() );\n\t} );\n} //end disableExternalLinks()\n\nexport function addParamToLocalLinks(\n\tparamName: string,\n\tparamValue?: number | string | boolean\n): void {\n\tArray.from( document.querySelectorAll( 'a' ) ).forEach( ( link ) => {\n\t\tconst href = link.getAttribute( 'href' ) || '';\n\t\tif ( isExternalLink( href ) ) {\n\t\t\treturn;\n\t\t} //end if\n\n\t\t// TODO. Remove fragment stuff when this pull request is finally merged: https://github.com/WordPress/gutenberg/pull/16656\n\t\tconst cleanUrl = href.replace( /#.*$/, '' );\n\t\tconst fragment = href.replace( /^[^#]*/, '' );\n\t\tconst finalUrl =\n\t\t\taddQueryArgs( cleanUrl, { [ paramName ]: paramValue ?? '' } ) +\n\t\t\tfragment;\n\n\t\tlink.setAttribute( 'href', finalUrl );\n\t} );\n} //end addParamToLocalLinks()\n","// extracted by mini-css-extract-plugin\nexport {};","module.exports = window[\"wp\"][\"domReady\"];","module.exports = window[\"wp\"][\"url\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\n * External dependencies\n */\nimport type { Dict } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { initJavaScriptPreviewer } from './javascript-previewer';\n\nconst hasNab = ( x: unknown ): x is { nab: Dict } =>\n\t!! x && 'object' === typeof x && 'nab' in x;\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\n( window as any as Dict ).nab = {\n\t...( hasNab( window ) ? window.nab : {} ),\n\tinitJavaScriptPreviewer,\n};\n"],"names":["domReady","getQueryArgs","disableExternalLinks","addParamToLocalLinks","initJavaScriptPreviewer","alternative","run","value","document","location","href","addQueryArgs","addFreeTracker","link","utm_source","utm_medium","utm_campaign","isExternalLink","test","replace","currentDomain","indexOf","Array","from","querySelectorAll","forEach","getAttribute","classList","add","addEventListener","ev","preventDefault","paramName","paramValue","cleanUrl","fragment","finalUrl","_a","setAttribute","hasNab","x","window","nab","__assign"],"sourceRoot":""}