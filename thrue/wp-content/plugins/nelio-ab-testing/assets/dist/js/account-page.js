(()=>{var e={4184:(e,t)=>{var n;!function(){"use strict";var a={}.hasOwnProperty;function r(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var i=typeof n;if("string"===i||"number"===i)e.push(n);else if(Array.isArray(n)){if(n.length){var o=r.apply(null,n);o&&e.push(o)}}else if("object"===i){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var c in n)a.call(n,c)&&n[c]&&e.push(c)}}}return e.join(" ")}e.exports?(r.default=r,e.exports=r):void 0===(n=function(){return r}.apply(t,[]))||(e.exports=n)}()}},t={};function n(a){var r=t[a];if(void 0!==r)return r.exports;var i=t[a]={exports:{}};return e[a](i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var a={};(()=>{"use strict";n.r(a),n.d(a,{initPage:()=>zt});var e={};n.r(e),n.d(e,{getAccount:()=>_,getCurrency:()=>V,getDeactivationDate:()=>j,getEmail:()=>O,getFirstname:()=>C,getFullname:()=>N,getInvoices:()=>y,getLastname:()=>k,getLicense:()=>P,getMode:()=>F,getNextChargeDate:()=>B,getNextChargeTotal:()=>U,getPeriod:()=>M,getPhoto:()=>T,getPlan:()=>I,getProductDisplay:()=>L,getSite:()=>E,getSites:()=>h,getSitesAllowed:()=>Q,getStartDate:()=>A,getState:()=>R,getSubscriptionId:()=>S,getSubscriptionProduct:()=>D,getSubscriptionQuota:()=>x,getUrlToManagePayments:()=>q,isAgency:()=>W,isAgencyFullViewEnabled:()=>G,isLocked:()=>$,isSubscriptionDeprecated:()=>w});var t={};n.r(t),n.d(t,{enableAgencyFullView:()=>H,lock:()=>K,receiveAccount:()=>z,receiveInvoices:()=>X,receiveSites:()=>J,removeSiteAfterUnlink:()=>Z,unlock:()=>Y});var r={};n.r(r),n.d(r,{cancelSubscription:()=>fe,limitSiteQuota:()=>ge,linkSite:()=>me,uncancelSubscription:()=>de,unlinkSite:()=>pe,upgradeSubscription:()=>be});var i={};n.r(i),n.d(i,{getAccount:()=>he,getInvoices:()=>xe,getSites:()=>ye,getSubscriptionQuota:()=>Ee});const o=window.wp.element;window.wp.domReady;const c=window.wp.notices,l=window.wp.components,s=window.wp.i18n,u=window.nab.components;var m=[{label:(0,s._x)("How do I change my payment details?","text","nelio-ab-testing"),link:(0,s._x)("https://neliosoftware.com/testing/help/how-do-i-change-my-payment-details/","text","nelio-ab-testing")},{label:(0,s._x)("What if my monthly quota of page views gets exhausted?","text","nelio-ab-testing"),link:(0,s._x)("https://neliosoftware.com/testing/help/what-if-my-monthly-quota-gets-exhausted/","text","nelio-ab-testing")}],p=function(e){var t,n=e.isSubscribed,a=e.siteId,r=(0,o.useState)(!1),i=r[0],c=r[1];return(0,o.useEffect)((function(){var e=setTimeout((function(){return c(!1)}),1500);return function(){return clearTimeout(e)}}),[i]),o.createElement("h1",{className:"wp-heading-inline nelio-ab-testing-page-title"},o.createElement("span",null,n?(0,s._x)("Account Details","text","nelio-ab-testing"):(0,s._x)("Upgrade to Nelio A/B Testing Premium","user","nelio-ab-testing")),o.createElement("span",{className:"nelio-ab-testing-page-title__support-key"},o.createElement("strong",null,(0,s._x)("Support Key:","text","nelio-ab-testing")),o.createElement("code",null,a),!!(null===(t=navigator.clipboard)||void 0===t?void 0:t.writeText)&&o.createElement(l.IconButton,{icon:"admin-page",onClick:function(){return!i&&void navigator.clipboard.writeText(a).then((function(){return c(!0)}))}})),i&&o.createElement(l.Snackbar,{className:"nelio-ab-testing-page-title__support-key-copied"},(0,s._x)("Copied!","text (support key)","nelio-ab-testing")))};const f=window.wp.data,d=window.lodash;var b="nab/account",g={account:{currency:"USD",deactivationDate:"",email:"",firstname:"",fullname:"",isAgency:!1,lastname:"",license:"",mode:"free",nextChargeDate:"",nextChargeTotal:"",period:"month",photo:"",plan:"free",productDisplay:"",productId:"",quota:500,quotaExtra:0,quotaPerMonth:0,sitesAllowed:1,startDate:"",state:"active",subscription:"",urlToManagePayments:""},invoices:[],sites:[],isPageLocked:!1,isAgencyFullViewEnabled:!1},v=function(){return v=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},v.apply(this,arguments)};function _(e){return e.account}function h(e,t){return t?e.sites:[]}function E(e,t){return(0,d.find)(e.sites,{id:t})}function y(e,t){return t?e.invoices:[]}function x(e){var t=e.account,n=t.quota,a=t.quotaExtra,r=t.quotaPerMonth,i=n+a;return{mode:"subscription",availableQuota:i,percentage:Math.floor(100*(i+.1)/r)}}function S(e){return e.account.subscription}function w(e){return!!e.account.subscription.startsWith("OL")}function N(e){return e.account.fullname}function C(e){return e.account.firstname}function k(e){return e.account.lastname}function O(e){return e.account.email}function A(e){return e.account.startDate}function D(e){return e.account.productId}function I(e){return e.account.plan}function P(e){return e.account.license}function T(e){return e.account.photo}function L(e){return e.account.productDisplay}function F(e){return e.account.mode}function M(e){return e.account.period}function R(e){return e.account.state}function j(e){return e.account.deactivationDate}function B(e){return e.account.nextChargeDate}function U(e){return e.account.nextChargeTotal}function Q(e){return e.account.sitesAllowed}function V(e){return e.account.currency}function q(e){return e.account.urlToManagePayments}function W(e){return!!e.account.isAgency}function $(e){return!!e.isPageLocked}function G(e){return W(e)&&!!e.isAgencyFullViewEnabled}function K(){return{type:"LOCK_PAGE"}}function Y(){return{type:"UNLOCK_PAGE"}}function H(){return{type:"ENABLE_AGENCY_FULL_VIEW"}}function z(e){return{type:"RECEIVE_ACCOUNT",account:e}}function J(e){return{type:"RECEIVE_SITES",sites:(0,d.castArray)(e)}}function X(e){return{type:"RECEIVE_INVOICES",invoices:(0,d.castArray)(e)}}function Z(e){return{type:"UNLINK_SITE",id:e}}const ee=window.wp.apiFetch;var te=n.n(ee);const ne=window.wp.date,ae=window.wp.url;var re=function(){return re=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},re.apply(this,arguments)};const ie=function(e){var t=e.url,n=e.path,a=(0,ne.format)("YmjHi").substring(0,11)+"0";return te()(re(re(re({},e),t&&{url:oe(e)?(0,ae.addQueryArgs)(t,{nabts:a}):t}),n&&{path:(0,ae.addQueryArgs)(n,{nabts:a})}))};var oe=function(e){var t,n;return!!(null===(t=e.url)||void 0===t?void 0:t.includes("/wp-json/"))||!!(null===(n=e.url)||void 0===n?void 0:n.includes("rest_route"))||!!Object.keys(e).includes("rest_route")};const ce=window.nab.utils;var le=function(){return le=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},le.apply(this,arguments)},se=function(e,t,n,a){return new(n||(n=Promise))((function(r,i){function o(e){try{l(a.next(e))}catch(e){i(e)}}function c(e){try{l(a.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,c)}l((a=a.apply(e,t||[])).next())}))},ue=function(e,t){var n,a,r,i,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(l){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(o=0)),o;)try{if(n=1,a&&(r=2&c[0]?a.return:c[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,c[1])).done)return r;switch(a=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,a=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!((r=(r=o.trys).length>0&&r[r.length-1])||6!==c[0]&&2!==c[0])){o=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){o.label=c[1];break}if(6===c[0]&&o.label<r[1]){o.label=r[1],r=c;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(c);break}r[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],a=0}finally{n=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,l])}}};function me(e){return se(this,void 0,void 0,(function(){var t;return ue(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),(0,f.dispatch)(b).lock(),[4,ie({path:"/nab/v1/site/subscription",method:"POST",data:{license:e}})];case 1:return n.sent(),window.location.reload(),[3,3];case 2:return t=n.sent(),(0,f.dispatch)(b).unlock(),(0,ce.createErrorNotice)(t),[3,3];case 3:return[2]}}))}))}function pe(e){return se(this,void 0,void 0,(function(){var t,n;return ue(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),(0,f.dispatch)(b).lock(),[4,ie({path:"/nab/v1/site/".concat(e,"/subscription"),method:"DELETE"})];case 1:return a.sent(),(null==(t=(0,f.select)(b).getSite(e))?void 0:t.isCurrentSite)?(window.location.reload(),[2]):((0,f.dispatch)(b).unlock(),(0,f.dispatch)(b).removeSiteAfterUnlink(e),[3,3]);case 2:return n=a.sent(),(0,f.dispatch)(b).unlock(),(0,ce.createErrorNotice)(n),[3,3];case 3:return[2]}}))}))}function fe(){return se(this,void 0,void 0,(function(){var e,t;return ue(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),(0,f.dispatch)(b).lock(),e=(0,f.select)(b).getSubscriptionId(),[4,ie({path:"/nab/v1/subscription/".concat(e),method:"DELETE"})];case 1:return n.sent(),window.location.reload(),[3,3];case 2:return t=n.sent(),(0,f.dispatch)(b).unlock(),(0,ce.createErrorNotice)(t),[3,3];case 3:return[2]}}))}))}function de(){return se(this,void 0,void 0,(function(){var e,t;return ue(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),(0,f.dispatch)(b).lock(),e=(0,f.select)(b).getSubscriptionId(),[4,ie({path:"/nab/v1/subscription/".concat(e,"/uncancel"),method:"POST"})];case 1:return n.sent(),window.location.reload(),[3,3];case 2:return t=n.sent(),(0,f.dispatch)(b).unlock(),(0,ce.createErrorNotice)(t),[3,3];case 3:return[2]}}))}))}function be(e){return se(this,void 0,void 0,(function(){var t,n;return ue(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),(0,f.dispatch)(b).lock(),t=(0,f.select)(b).getSubscriptionId(),[4,ie({path:"/nab/v1/subscription/".concat(t),method:"PUT",data:{plan:e}})];case 1:return a.sent(),window.location.reload(),[3,3];case 2:return n=a.sent(),(0,f.dispatch)(b).unlock(),(0,ce.createErrorNotice)(n),[3,3];case 3:return[2]}}))}))}function ge(e,t){return se(this,void 0,void 0,(function(){var n,a,r,i;return ue(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),n=(0,f.select)(b).getSubscriptionId(),a=(0,f.select)(b).getSites(n),[4,ie({path:"/nab/v1/site/".concat(e),method:"PUT",data:{maxMonthlyQuota:t}})];case 1:return r=o.sent(),(0,f.dispatch)(b).receiveSites(a.map((function(e){return e.id===r.id?le(le(le({},e),r),{maxMonthlyQuota:t}):e}))),[3,3];case 2:return i=o.sent(),(0,ce.createErrorNotice)(i),[3,3];case 3:return[2]}}))}))}var ve=function(e,t,n,a){return new(n||(n=Promise))((function(r,i){function o(e){try{l(a.next(e))}catch(e){i(e)}}function c(e){try{l(a.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,c)}l((a=a.apply(e,t||[])).next())}))},_e=function(e,t){var n,a,r,i,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(l){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(o=0)),o;)try{if(n=1,a&&(r=2&c[0]?a.return:c[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,c[1])).done)return r;switch(a=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,a=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!((r=(r=o.trys).length>0&&r[r.length-1])||6!==c[0]&&2!==c[0])){o=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){o.label=c[1];break}if(6===c[0]&&o.label<r[1]){o.label=r[1],r=c;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(c);break}r[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],a=0}finally{n=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,l])}}};function he(){return ve(this,void 0,void 0,(function(){var e,t;return _e(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,ie({path:"/nab/v1/account"})];case 1:return e=n.sent(),(0,f.dispatch)(b).receiveAccount(e),[3,3];case 2:throw t=n.sent(),(0,ce.createErrorNotice)(t,(0,s._x)("Error while accessing site info.","text","nelio-ab-testing")),t;case 3:return[2]}}))}))}function Ee(){return ve(this,void 0,void 0,(function(){return _e(this,(function(e){switch(e.label){case 0:return[4,(0,f.resolveSelect)(b).getAccount()];case 1:return e.sent(),[2]}}))}))}function ye(e){return ve(this,void 0,void 0,(function(){var t,n;return _e(this,(function(a){switch(a.label){case 0:if(!e)return[2];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,ie({path:"/nab/v1/subscription/".concat(e,"/sites")})];case 2:return t=a.sent(),(0,f.dispatch)(b).receiveSites(t),[3,4];case 3:throw n=a.sent(),(0,ce.createErrorNotice)(n,(0,s.sprintf)(/* translators: subscription id */
(0,s._x)("Error while accessing sites in subscription %s.","text","nelio-ab-testing"),e)),n;case 4:return[2]}}))}))}function xe(e){return ve(this,void 0,void 0,(function(){var t,n;return _e(this,(function(a){switch(a.label){case 0:if(!e)return[2];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,ie({path:"/nab/v1/subscription/".concat(e,"/invoices")})];case 2:return t=a.sent(),(0,f.dispatch)(b).receiveInvoices(t),[3,4];case 3:throw n=a.sent(),(0,ce.createErrorNotice)(n,(0,s.sprintf)(/* translators: subscription id */
(0,s._x)("Error while accessing invoices in subscription %s.","text","nelio-ab-testing"),e)),n;case 4:return[2]}}))}))}var Se,we=function(){return we=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},we.apply(this,arguments)},Ne=we(we({},t),r);(0,f.registerStore)(b,{reducer:function(e,t){var n;return void 0===e&&(e=g),null!==(n=function(e,t){switch(t.type){case"RECEIVE_ACCOUNT":return v(v({},e),{account:t.account});case"RECEIVE_INVOICES":return v(v({},e),{invoices:t.invoices});case"RECEIVE_SITES":return v(v({},e),{sites:t.sites});case"UNLINK_SITE":return v(v({},e),{sites:(0,d.reject)(e.sites,{id:t.id})});case"LOCK_PAGE":return v(v({},e),{isPageLocked:!0});case"UNLOCK_PAGE":return v(v({},e),{isPageLocked:!1});case"ENABLE_AGENCY_FULL_VIEW":return v(v({},e),{isAgencyFullViewEnabled:!0})}}(e,t))&&void 0!==n?n:e},controls:f.controls,actions:Ne,selectors:e,resolvers:i});var Ce=null!==(Se=null===c.store||void 0===c.store?void 0:c.store.name)&&void 0!==Se?Se:"core/notices",ke=function(e){var t=e.children,n=Oe(),a=Ae(),r=De(),i=(0,f.useDispatch)(Ce).removeNotice;return n?o.createElement(u.LoadingAnimation,{text:(0,s._x)("Loading…","text","nelio-ab-testing")}):o.createElement(o.Fragment,null,o.createElement(l.NoticeList,{notices:r,className:"components-editor-notices__pinned",onRemove:i}),!a&&t)},Oe=function(){return(0,f.useSelect)((function(e){return e(b).getAccount(),!e(b).hasFinishedResolution("getAccount")}))},Ae=function(){return(0,f.useSelect)((function(e){return e(b).hasResolutionFailed("getAccount")}))},De=function(){return(0,f.useSelect)((function(e){return e(Ce).getNotices()}))};const Ie=window.React;function Pe(e){return e.startsWith("{{/")?{type:"componentClose",value:e.replace(/\W/g,"")}:e.endsWith("/}}")?{type:"componentSelfClosing",value:e.replace(/\W/g,"")}:e.startsWith("{{")?{type:"componentOpen",value:e.replace(/\W/g,"")}:{type:"string",value:e}}function Te(e,t){let n,a,r=[];for(let i=0;i<e.length;i++){const o=e[i];if("string"!==o.type){if(void 0===t[o.value])throw new Error(`Invalid interpolation, missing component node: \`${o.value}\``);if("object"!=typeof t[o.value])throw new Error(`Invalid interpolation, component node must be a ReactElement or null: \`${o.value}\``);if("componentClose"===o.type)throw new Error(`Missing opening component token: \`${o.value}\``);if("componentOpen"===o.type){n=t[o.value],a=i;break}r.push(t[o.value])}else r.push(o.value)}if(n){const i=function(e,t){const n=t[e];let a=0;for(let r=e+1;r<t.length;r++){const e=t[r];if(e.value===n.value){if("componentOpen"===e.type){a++;continue}if("componentClose"===e.type){if(0===a)return r;a--}}}throw new Error("Missing closing component token `"+n.value+"`")}(a,e),o=Te(e.slice(a+1,i),t),c=(0,Ie.cloneElement)(n,{},o);if(r.push(c),i<e.length-1){const n=Te(e.slice(i+1),t);r=r.concat(n)}}return r=r.filter(Boolean),0===r.length?null:1===r.length?r[0]:(0,Ie.createElement)(Ie.Fragment,null,...r)}function Le(e){const{mixedString:t,components:n,throwErrors:a}=e;if(!n)return t;if("object"!=typeof n){if(a)throw new Error(`Interpolation Error: unable to process \`${t}\` because components is not an object`);return t}const r=function(e){return e.split(/(\{\{\/?\s*\w+\s*\/?\}\})/g).map(Pe)}(t);try{return Te(r,n)}catch(e){if(a)throw new Error(`Interpolation Error: unable to process \`${t}\` because of error \`${e.message}\``);return t}}const Fe=window.nab.data,Me=window.nab.date;var Re=function(e){var t=e.siteId,n=(0,f.useSelect)((function(e){return e(b).getProductDisplay()}));return o.createElement("div",{className:"nab-account-container__box nab-plan"},o.createElement("div",{className:"nab-plan__content"},o.createElement("h3",{className:"nab-plan__title"},n,o.createElement("span",{className:"nab-plan__period"},(0,s._x)("Agency Plan","text","nelio-ab-testing"))),o.createElement("div",{className:"nab-plan__renewal"},(0,s._x)("You’re currently using an agency subscription plan.","user","nelio-ab-testing")),o.createElement(u.QuotaMeter,null)),o.createElement("div",{className:"nab-plan__actions"},o.createElement(je,{siteId:t}),o.createElement(Be,null)))},je=function(e){var t=e.siteId,n=(0,o.useState)(!1),a=n[0],r=n[1],i=(0,f.useDispatch)(b).unlinkSite,c=function(){return r(!1)};return o.createElement(o.Fragment,null,o.createElement(l.Button,{isDestructive:!0,className:"nab-plan__action",onClick:function(){return r(!0)}},(0,s._x)("Downgrade to Free Version","command","nelio-ab-testing")),o.createElement(u.ConfirmationDialog,{title:(0,s._x)("Downgrade to Free version?","text","nelio-ab-testing"),text:(0,s._x)("This will remove the subscription license from the site and you’ll be using Nelio A/B Testing’s free version.","text","nelio-ab-testing"),confirmLabel:(0,s._x)("Downgrade","command","nelio-ab-testing"),isOpen:a,onCancel:c,onConfirm:function(){c(),i(t)}}))},Be=function(){var e=(0,o.useState)(!1),t=e[0],n=e[1],a=(0,o.useState)(""),r=a[0],i=a[1],c=(0,o.useState)(!1),u=c[0],m=c[1],p=(0,f.useDispatch)(b),g=p.enableAgencyFullView,v=p.receiveAccount;return o.createElement("div",null,o.createElement(l.Button,{variant:"secondary",className:"nab-plan__action",onClick:function(){return n(!0)}},(0,s._x)("View Details","command","nelio-ab-testing")),t&&o.createElement(l.Popover,{className:"nab-license-form",noArrow:!1,position:"bottom left"},o.createElement(l.TextControl,{value:r,placeholder:(0,s._x)("Type your license here","user","nelio-ab-testing"),className:"nab-license-form__text-control",onChange:function(e){return i((0,d.trim)(e))}}),o.createElement(l.Button,{variant:"primary",isBusy:u,className:"nab-license-form__button",onClick:function(){m(!0),ie({path:"/nab/v1/account/agency",method:"POST",data:{license:r}}).then((function(e){v(e),g(),m(!1),n(!1)})).catch((function(){m(!1)}))},disabled:!r.length||u},u?(0,s._x)("Validating…","text","nelio-ab-testing"):(0,s._x)("Validate","command","nelio-ab-testing"))))},Ue=function(e){var t=e.isOpen,n=e.position,a=e.onClick,r=e.onFocusOutside,i=(0,o.useState)(""),c=i[0],u=i[1],m=(0,f.useDispatch)(b).linkSite;return t?o.createElement(l.Popover,{className:"nab-license-form",noArrow:!1,position:n,onFocusOutside:r},o.createElement(l.TextControl,{value:c,placeholder:(0,s._x)("Type your license here","user","nelio-ab-testing"),maxLength:Math.max(21,26),className:"nab-license-form__text-control",onChange:function(e){return u((0,d.trim)(e))}}),o.createElement(l.Button,{variant:"primary",className:"nab-license-form__button",disabled:21!==c.length&&26!==c.length,onClick:function(){a(),m(c)}},(0,s._x)("Apply","command","nelio-ab-testing"))):null},Qe=function(e){var t=e.isOpen,n=e.position,a=e.onClick,r=e.onFocusOutside,i=Ve(),c=qe(),u=We(),m=(0,f.useDispatch)(b).upgradeSubscription,p=(0,o.useState)(""),d=p[0],g=p[1];return t?i?o.createElement(l.Popover,{className:"nab-upgrade-form nab-upgrade-form--loading",noArrow:!1,position:n,onFocusOutside:r},o.createElement(l.Spinner,null)):o.createElement(l.Popover,{className:"nab-upgrade-form",noArrow:!1,position:n,onFocusOutside:r},o.createElement(l.RadioControl,{className:"nab-upgrade-form__product-container",label:(0,s._x)("Subscription Plans","text","nelio-ab-testing"),selected:d,options:c.map((function(e){var t=e.id,n=e.displayName,a=e.price,r=e.description;return{label:o.createElement("div",{className:"nab-upgrade-form__product"},o.createElement("strong",{className:"nab-upgrade-form__product-name"},Ge(n)),o.createElement("span",{className:"nab-upgrade-form__product-price",title:u},$e(a[u]||0,u)),o.createElement("span",{className:"nab-upgrade-form__product-description"},Ge(r))),value:t}})),onChange:g}),o.createElement("div",{className:"nab-upgrade-form__button-container"},o.createElement(l.Button,{variant:"primary",className:"nab-upgrade-form__button",disabled:!d,onClick:function(){a(),m(d)}},(0,s._x)("Upgrade Subscription","command","nelio-ab-testing")))):null},Ve=function(){return(0,f.useSelect)((function(e){return!e(Fe.STORE_NAME).hasFinishedResolution("getProducts")}))},qe=function(){return(0,f.useSelect)((function(e){var t=e(Fe.STORE_NAME).getProducts,n=(0,e(b).getSubscriptionProduct)(),a=t();return(0,d.filter)(a,(function(e){return e.upgradeableFrom.includes(n)}))}))},We=function(){return(0,f.useSelect)((function(e){return e(b).getCurrency()||"USD"}))},$e=function(e,t){return"EUR"===t?"".concat(e,"€"):"$".concat(e)},Ge=function(e){return(0,Me.getLocale)().startsWith("es")?e.es:e.en},Ke=function(e){var t=e.siteId,n=vt();return ut()?o.createElement(Re,{siteId:t}):o.createElement("div",{className:"nab-account-container__box nab-plan"},o.createElement("div",{className:"nab-plan__content"},o.createElement(Ye,null),o.createElement(He,null),o.createElement(u.QuotaMeter,{disabled:n.isLoading,subscriptionQuota:n.data})),o.createElement(ze,null))},Ye=function(){var e=it().period,t=mt(),n=ot(),a=lt(),r="month"===e?(0,s._x)("Monthly","text","nelio-ab-testing"):(0,s._x)("Yearly","text","nelio-ab-testing");return o.createElement("h3",{className:"nab-plan__title"},t,o.createElement("span",{className:"nab-plan__period"},a?(0,s._x)("Free","text","nelio-ab-testing"):r),"canceled"===n&&o.createElement("span",{className:"nab-plan__state"},(0,s._x)("Canceled","text (account state)","nelio-ab-testing")))},He=function(){var e=lt(),t=st(),n=ot(),a=ct(),r=pt(),i=ft(),c=dt();return e?o.createElement("div",{className:"nab-plan__renewal"},(0,s._x)("You are using the free version of Nelio A/B Testing.","text","nelio-ab-testing")):t?o.createElement("div",{className:"nab-plan__renewal"},Le({mixedString:(0,s.sprintf)(/* translators: 1 -> price and currency; 2 -> date */
(0,s._x)("You’re currently using a premium version of Nelio A/B Testing for free. This invitation will end on %s and the plugin will be downgraded to a free plan. Please consider subscribing before that.","user","nelio-ab-testing"),"{{date}}".concat((0,Me.formatI18nDate)(i),"{{/date}}")),components:{date:o.createElement("span",{className:"nab-plan__renewal-date"})}})):"canceled"===n?o.createElement("div",{className:"nab-plan__renewal"},Le({mixedString:(0,s.sprintf)(/* translators: date */
(0,s._x)("Your subscription will end on %s.","text","nelio-ab-testing"),"{{date}}".concat((0,Me.formatI18nDate)(r),"{{/date}}")),components:{date:o.createElement("span",{className:"nab-plan__renewal-date"})}})):a?o.createElement("div",{className:"nab-plan__renewal"},Le({mixedString:(0,s._x)("{{link}}Contact us{{/link}} to get additional features to manage your account.","text","nelio-ab-testing"),components:{link:o.createElement("a",{href:"mailto:support@neliosoftware.com"})}})):o.createElement("div",{className:"nab-plan__renewal"},Le({mixedString:(0,s.sprintf)(/* translators: 1 -> price and currency; 2 -> date */
(0,s._x)("Next charge will be %1$s on %2$s.","text","nelio-ab-testing"),"{{money}}".concat(c,"{{/money}}"),"{{date}}".concat((0,Me.formatI18nDate)(i),"{{/date}}")),components:{date:o.createElement("span",{className:"nab-plan__renewal-date"}),money:o.createElement("span",{className:"nab-plan__renewal-amount"})}}))},ze=function(){var e=lt(),t=st(),n=ot();return ct()?o.createElement("div",{className:"nab-plan__actions"},o.createElement(Ze,null),o.createElement(et,null)):e||t?o.createElement("div",{className:"nab-plan__actions"},o.createElement(Je,null),o.createElement(Xe,null)):"canceled"===n?o.createElement("div",{className:"nab-plan__actions"},o.createElement(rt,null)):o.createElement("div",{className:"nab-plan__actions"},o.createElement(tt,null),o.createElement(nt,null),o.createElement(at,null))},Je=function(){var e=(0,o.useState)(!1),t=e[0],n=e[1];return o.createElement("span",{className:"nab-plan__action-container"},o.createElement(l.Button,{variant:"secondary",className:"nab-plan__action",onClick:function(){return n(!0)}},(0,s._x)("Use License","command","nelio-ab-testing")),o.createElement(Ue,{position:"bottom center",onFocusOutside:function(){return n(!1)},onClick:function(){return n(!1)},isOpen:t}))},Xe=function(){var e=gt();return o.createElement(l.ExternalLink,{className:"nab-plan__action components-button is-primary",href:(0,ce.getSubscribeLink)(e)},(0,ce.getSubscribeLabel)(e))},Ze=function(){return o.createElement(l.ExternalLink,{className:"nab-plan__action components-button is-secondary",href:"mailto:support@neliosoftware.com?subject=Buy%20Quota"},(0,s._x)("Buy More Quota","command","nelio-ab-testing"))},et=function(){return o.createElement(l.ExternalLink,{className:"nab-plan__action components-button is-primary",href:"mailto:support@neliosoftware.com?subject=Upgrade%20Subscription"},(0,s._x)("Upgrade Subscription","command","nelio-ab-testing"))},tt=function(){var e=(0,o.useState)(!1),t=e[0],n=e[1],a=(0,f.useDispatch)(b).cancelSubscription,r=ft();return o.createElement(o.Fragment,null,o.createElement(l.Button,{isDestructive:!0,className:"nab-plan__action",onClick:function(){return n(!0)}},(0,s._x)("Cancel Subscription","command","nelio-ab-testing")),o.createElement(u.ConfirmationDialog,{title:(0,s._x)("Cancel Subscription?","text","nelio-ab-testing"),text:(0,s.sprintf)(/* translators: a date */
(0,s._x)("Canceling your subscription will cause it not to renew. If you cancel your subscrition, it will continue until %s. Then, the subscription will expire and will not be invoiced again. Do you want to cancel your subscription?","user","nelio-ab-testing"),(0,Me.formatI18nDate)(r)),isDestructive:!0,confirmLabel:(0,s._x)("Cancel Subscription","command","nelio-ab-testing"),cancelLabel:(0,s._x)("Back","command","nelio-ab-testing"),onCancel:function(){return n(!1)},onConfirm:function(){n(!1),a()},isOpen:t}))},nt=function(){var e=(0,o.useState)(!1),t=e[0],n=e[1];return o.createElement("div",null,o.createElement(l.Button,{variant:"secondary",className:"nab-plan__action",onClick:function(){return n(!0)}},(0,s._x)("Buy More Quota","command","nelio-ab-testing")),o.createElement(u.QuotaPurchasePopover,{position:"bottom center",onClick:function(){return n(!1)},onFocusOutside:function(){return n(!1)},isOpen:t}))},at=function(){var e=bt(),t=(0,o.useState)(!1),n=t[0],a=t[1];return e?o.createElement("div",null,o.createElement(l.Button,{variant:"primary",className:"nab-plan__action",onClick:function(){return a(!0)}},(0,s._x)("Upgrade Subscription","command","nelio-ab-testing")),o.createElement(Qe,{position:"bottom center",onClick:function(){return a(!1)},onFocusOutside:function(){return a(!1)},isOpen:n})):null},rt=function(){var e=(0,o.useState)(!1),t=e[0],n=e[1],a=(0,f.useDispatch)(b).uncancelSubscription,r=ft();return o.createElement(o.Fragment,null,o.createElement(l.Button,{variant:"primary",className:"nab-plan__action",onClick:function(){return n(!0)}},(0,s._x)("Reactivate Subscription","command","nelio-ab-testing")),o.createElement(u.ConfirmationDialog,{title:(0,s._x)("Reactivate Subscription?","text","nelio-ab-testing"),text:(0,s.sprintf)(/* translators: a date */
(0,s._x)("Reactivating your subscription will cause it to renew on %s. Do you want to reactivate your subscription?","user","nelio-ab-testing"),(0,Me.formatI18nDate)(r)),confirmLabel:(0,s._x)("Reactivate Subscription","command","nelio-ab-testing"),cancelLabel:(0,s._x)("Back","command","nelio-ab-testing"),onCancel:function(){return n(!1)},onConfirm:function(){n(!1),a()},isOpen:t}))},it=function(){return(0,f.useSelect)((function(e){return{period:e(b).getPeriod(),plan:e(b).getPlan()}}))},ot=function(){return(0,f.useSelect)((function(e){return e(b).getState()}))},ct=function(){return(0,f.useSelect)((function(e){return e(b).isSubscriptionDeprecated()}))},lt=function(){return(0,f.useSelect)((function(e){return"free"===e(b).getMode()}))},st=function(){return(0,f.useSelect)((function(e){return"invitation"===e(b).getMode()}))},ut=function(){return(0,f.useSelect)((function(e){return e(b).isAgency()&&!e(b).isAgencyFullViewEnabled()}))},mt=function(){return(0,f.useSelect)((function(e){return e(b).getProductDisplay()}))},pt=function(){return(0,f.useSelect)((function(e){return e(b).getDeactivationDate()||e(Fe.STORE_NAME).getToday()}))},ft=function(){return(0,f.useSelect)((function(e){return e(b).getNextChargeDate()||e(Fe.STORE_NAME).getToday()}))},dt=function(){return(0,f.useSelect)((function(e){return e(b).getNextChargeTotal()}))},bt=function(){return(0,f.useSelect)((function(e){var t=e(Fe.STORE_NAME).getProducts,n=(0,e(b).getSubscriptionProduct)(),a=t(),r=(0,d.filter)(a,(function(e){return e.upgradeableFrom.includes(n)}));return!!r.length}))},gt=function(){return(0,f.useSelect)((function(e){return e(Fe.STORE_NAME).getToday()}))},vt=function(){return(0,f.useSelect)((function(e){return{data:e(b).getSubscriptionQuota(),isLoading:!e(b).hasFinishedResolution("getSubscriptionQuota")}}))},_t=function(){return _t=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},_t.apply(this,arguments)},ht=function(e){var t=e.label,n=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n}(e,["label"]),a=(0,o.useState)(!1),r=a[0],i=a[1],c=(0,f.useSelect)((function(e){return e(Fe.STORE_NAME).getPluginSetting("siteId")})),m=(0,f.useSelect)((function(e){return e(b).isLocked()})),p=(0,f.useDispatch)(b).unlinkSite;return o.createElement(o.Fragment,null,o.createElement(l.Button,_t({onClick:function(){return i(!0)},disabled:m},n),t),o.createElement(u.ConfirmationDialog,{title:(0,s._x)("Downgrade to Free Version?","text","nelio-ab-testing"),text:(0,s._x)("This action will remove the license from this site so that you can use it somewhere else. Nelio A/B Testing will remain active on this site, but you will be using the free version instead. Do you want to continue?","user","nelio-ab-testing"),confirmLabel:(0,s._x)("Downgrade","command (remove license)","nelio-ab-testing"),cancelLabel:(0,s._x)("Back","command","nelio-ab-testing"),isDestructive:!0,onCancel:function(){return i(!1)},onConfirm:function(){p(c),i(!1)},isOpen:r}))},Et=function(){var e=yt(),t=xt(),n=St(),a=wt(),r=Nt(),i=Ct(),c=(0,o.useState)(!1),u=c[0],m=c[1];return e?o.createElement("div",{className:"nab-account-container__box nab-info"},o.createElement("h3",{className:"nab-info__title"},(0,s._x)("Account Information","title (account)","nelio-ab-testing")),o.createElement("div",{className:"nab-info__container"},o.createElement("div",{className:"nab-info__profile"},o.createElement("div",{className:"nab-info__picture nab-first-letter-a"},o.createElement("div",{className:"nab-info__actual-picture",style:{backgroundImage:"url(".concat(i,")")}}))),o.createElement("div",{className:"nab-info__details"},o.createElement("p",{className:"nab-info__name"},t),o.createElement("p",{className:"nab-info__email"},o.createElement(l.Dashicon,{icon:"email",className:"nab-info__icon"}),n),o.createElement("p",{className:"nab-info__creation-date"},o.createElement(l.Dashicon,{icon:"calendar",className:"nab-info__icon"}),Le({mixedString:(0,s.sprintf)(/* translators: date */
(0,s._x)("Member since %s.","text","nelio-ab-testing"),"{{date}}".concat((0,Me.formatI18nDate)(a),"{{/date}}")),components:{date:o.createElement("strong",null)}})),o.createElement("div",{className:"nab-info__license"},o.createElement(l.Dashicon,{icon:"admin-network",className:"nab-info__icon"}),o.createElement("code",{title:(0,s._x)("License Key","text","nelio-ab-testing")},r),o.createElement("div",{className:"nab-info__change-license"},o.createElement(l.Button,{variant:"link",onClick:function(){return m(!0)}},(0,s._x)("Change","command","nelio-ab-testing")),o.createElement(Ue,{isOpen:u,position:"bottom center",onClick:function(){return m(!1)},onFocusOutside:function(){return m(!1)}})),o.createElement("div",{className:"nab-info__remove-license"},o.createElement(ht,{variant:"link",isDestructive:!0,label:(0,s._x)("Remove","command","nelio-ab-testing")})))))):null},yt=function(){return(0,f.useSelect)((function(e){var t=e(b),n=t.getMode,a=t.isAgency,r=t.isAgencyFullViewEnabled,i="regular"===n(),o=a()&&!r();return i&&!o}))},xt=function(){return(0,f.useSelect)((function(e){return e(b).getFullname()}))},St=function(){return(0,f.useSelect)((function(e){return e(b).getEmail()}))},wt=function(){return(0,f.useSelect)((function(e){return e(b).getStartDate()||e(Fe.STORE_NAME).getToday()}))},Nt=function(){return(0,f.useSelect)((function(e){return e(b).getLicense()}))},Ct=function(){return(0,f.useSelect)((function(e){return e(b).getPhoto()}))},kt=n(4184),Ot=n.n(kt);const At=window.nab.i18n;var Dt=function(e){var t=e.displayQuotaLimit,n=e.actualUrl,a=e.id,r=e.isCurrentSite,i=e.usedMonthlyQuota,c=e.maxMonthlyQuota,l=e.url;return o.createElement("li",{className:"nab-site"},o.createElement("span",{className:"nab-site__details"},r?o.createElement("span",{className:"nab-site__url"},o.createElement("span",{className:"nab-site__current-site"},n,!!n&&l!==n&&o.createElement(u.HelpIcon,{className:"nab-site__current-site-help",type:"info",text:(0,s.sprintf)(/* translators: site URL */
(0,s._x)("Activation URL is “%s”","text","nelio-ab-testing"),l)})),o.createElement("span",{className:"nab-site__label"},(0,s._x)("This site","text","nelio-ab-testing"))):o.createElement("span",{className:"nab-site__url"},o.createElement("a",{href:l,className:Ot()("nab-site__link",{"nab-site__link--current":r}),target:"_blank",rel:"noopener noreferrer"},l)),!!t&&o.createElement("small",null,o.createElement("strong",null,(0,s._x)("Quota Usage","text","nelio-ab-testing"),": "),(0,At.numberFormat)(i)," / ",Lt(c))),o.createElement(It,{siteId:a}),o.createElement(Pt,{siteId:a}))},It=function(e){var t=e.siteId,n=(0,o.useState)(!1),a=n[0],r=n[1],i=(0,f.useSelect)((function(e){return e(Fe.STORE_NAME).canLimitSiteQuota()})),c=(0,f.useDispatch)(b).limitSiteQuota,u=(0,f.useSelect)((function(e){var n,a;return null!==(a=null===(n=e(b).getSite(t))||void 0===n?void 0:n.maxMonthlyQuota)&&void 0!==a?a:-1}));return i?o.createElement(o.Fragment,null,o.createElement(l.Button,{variant:"tertiary",className:"nab-site__limit-quota-button",onClick:function(){return r(!0)}},(0,s._x)("Limit Quota","command","nelio-ab-testing")),a&&o.createElement(Tt,{initialValue:"".concat(u),onClose:function(){return r(!1)},onSave:function(e){return c(t,e)}})):null},Pt=function(e){var t=e.siteId,n=(0,o.useState)(!1),a=n[0],r=n[1],i=(0,f.useDispatch)(b).unlinkSite;return o.createElement(o.Fragment,null,o.createElement(l.Button,{isDestructive:!0,variant:"tertiary",className:"nab-site__unlink-button",onClick:function(){return r(!0)}},(0,s._x)("Unlink Site","command","nelio-ab-testing")),o.createElement(u.ConfirmationDialog,{title:(0,s._x)("Unlink Site?","text","nelio-ab-testing"),text:(0,s._x)("This will remove the subscription license from the site.","text","nelio-ab-testing"),confirmLabel:(0,s._x)("Unlink","command","nelio-ab-testing"),isOpen:a,onCancel:function(){return r(!1)},onConfirm:function(){r(!1),i(t)}}))},Tt=function(e){var t=e.initialValue,n=e.onClose,a=e.onSave,r=(0,o.useState)(!1),i=r[0],c=r[1],u=(0,o.useState)(t),m=u[0],p=u[1],f=m!==t;return o.createElement(l.Modal,{className:"site-quota-dialog",title:(0,s._x)("Site Quota","text","nelio-ab-testing"),onRequestClose:d.noop,isDismissible:!1},o.createElement(l.CheckboxControl,{checked:"-1"!==m,onChange:function(e){return p(e?"1000":"-1")},label:(0,s._x)("Limit quota usage in this site","command","nelio-ab-testing")}),"-1"!==m&&o.createElement(l.TextControl,{type:"number",min:"0",value:m,onChange:p}),o.createElement("div",{className:"site-quota-dialog__actions"},o.createElement(l.Button,{variant:"secondary",onClick:n},f?(0,s._x)("Discard Changes","command","nelio-ab-testing"):(0,s._x)("Close","command","nelio-ab-testing")),o.createElement(l.Button,{variant:"primary",onClick:function(){var e=Number.parseInt(m),t=-1===e?-1:Math.abs(e);c(!0),a(t).then(n).catch((function(){return c(!1)}))},disabled:!f||i},i?(0,s._x)("Saving…","text","nelio-ab-testing"):(0,s._x)("Save","command","nelio-ab-testing"))))},Lt=function(e){return-1===e?"∞":(0,At.numberFormat)(e)},Ft=function(){return Ft=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},Ft.apply(this,arguments)},Mt=function(){var e=jt(),t=Rt(),n=Bt(),a=Ut();if(!e)return null;var r=n.length,i=n.length>1||n.some((function(e){return 0<=e.maxMonthlyQuota}));return o.createElement("div",{className:"nab-account-container__box nab-sites"},o.createElement("h3",{className:"nab-sites__title"},(0,s._x)("Sites","text","nelio-ab-testing"),t&&o.createElement(l.Spinner,null),o.createElement("span",{className:"nab-sites__availability"},"".concat(r," / ").concat(a))),o.createElement("ul",{className:"nab-sites__list"},!t&&n.map((function(e){return o.createElement(Dt,Ft({key:e.id,displayQuotaLimit:i},e))}))))},Rt=function(){return(0,f.useSelect)((function(e){return!e(b).hasFinishedResolution("getSites",[e(b).getSubscriptionId()])}))},jt=function(){return(0,f.useSelect)((function(e){var t=e(b),n=t.getMode,a=t.isAgency,r=t.isAgencyFullViewEnabled,i="regular"===n(),o=a()&&!r();return i&&!o}))},Bt=function(){return(0,f.useSelect)((function(e){return e(b).getSites(e(b).getSubscriptionId())||[]}))},Ut=function(){return(0,f.useSelect)((function(e){return e(b).getSitesAllowed()}))},Qt=function(e){var t=e.invoiceUrl,n=e.reference,a=e.chargeDate,r=e.isRefunded,i=e.subtotalDisplay;return o.createElement("tr",{className:"nab-invoice"},o.createElement("td",{className:"nab-invoice__reference"},o.createElement("a",{href:t,className:"nab-invoice__link",target:"_blank",rel:"noopener noreferrer"},n)),o.createElement("td",{className:"nab-invoice__date"},a),o.createElement("td",{className:"nab-invoice__total"},r&&o.createElement("span",{className:"nab-invoice__label"},(0,s._x)("(Refunded)","text (invoice)","nelio-ab-testing")),o.createElement("span",{className:Ot()("nab-invoice__total-value",{"nab-invoice__total-value--refunded":r})},i)))},Vt=function(){return Vt=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},Vt.apply(this,arguments)},qt=function(){var e=Wt(),t=$t(),n=Gt(),a=Kt();return e?o.createElement("div",{className:"nab-account-container__box nab-billing"},o.createElement("h3",{className:"nab-billing__title"},(0,s._x)("Billing History","text","nelio-ab-testing"),t&&o.createElement(l.Spinner,null)),!t&&o.createElement(o.Fragment,null,o.createElement(l.ExternalLink,{className:"nab-billing__action",href:a},(0,s._x)("Manage Payments","user","nelio-ab-testing")),o.createElement("table",{className:"nab-billing__container"},o.createElement("thead",null,o.createElement("tr",null,o.createElement("th",{className:"nab-billing__reference"},(0,s._x)("Invoice Reference","text (account, billing table title)","nelio-ab-testing")),o.createElement("th",{className:"nab-billing__date"},(0,s._x)("Date","text (account, billing table title)","nelio-ab-testing")),o.createElement("th",{className:"nab-billing__total"},(0,s._x)("Total","text (account, billing table title)","nelio-ab-testing")))),o.createElement("tbody",{className:"invoice-list"},n.map((function(e){return o.createElement(Qt,Vt({key:e.reference},e))})))))):null},Wt=function(){return(0,f.useSelect)((function(e){var t=e(b),n=t.getMode,a=t.isAgency,r=t.isAgencyFullViewEnabled,i=t.isSubscriptionDeprecated,o="regular"===n(),c=i(),l=a()&&!r();return o&&!c&&!l}))},$t=function(){return(0,f.useSelect)((function(e){return!e(b).hasFinishedResolution("getInvoices",[e(b).getSubscriptionId()])}))},Gt=function(){return(0,f.useSelect)((function(e){return e(b).getInvoices(e(b).getSubscriptionId())}))},Kt=function(){return(0,f.useSelect)((function(e){return e(b).getUrlToManagePayments()}))},Yt=function(){return(0,f.useSelect)((function(e){return e(b).isLocked()}))?o.createElement(l.Modal,{className:"nab-locked",title:(0,s._x)("Loading…","text","nelio-ab-testing"),shouldCloseOnEsc:!1,shouldCloseOnClickOutside:!1,isDismissible:!1,onRequestClose:d.noop},o.createElement(l.Spinner,null)):null},Ht=function(e){var t=e.siteId;return o.createElement("div",{className:"nab-account-container"},o.createElement(Ke,{siteId:t}),o.createElement(Et,null),o.createElement(Mt,null),o.createElement(qt,null),o.createElement(Yt,null))};function zt(e,t){var n,a,r=t.siteId,i=t.isSubscribed,c=document.getElementById(e);n=o.createElement(l.SlotFillProvider,null,o.createElement(p,{isSubscribed:i,siteId:r}),o.createElement(ke,null,o.createElement(Ht,{siteId:r})),o.createElement(l.Popover.Slot,null)),(a=c)&&(o.createRoot?(0,o.createRoot)(a).render(n):(0,o.render)(n,a)),(0,u.appendContextualHelp)({screen:"account",questions:m})}})();var r=nab="undefined"==typeof nab?{}:nab;for(var i in a)r[i]=a[i];a.__esModule&&Object.defineProperty(r,"__esModule",{value:!0})})();