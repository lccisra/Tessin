{"version":3,"file":"js/css-experiment-public.js","mappings":";;;;;;;;;;;;;;;;;;;AAAA;;;AAGiD;AACE;AAEnD;;;AAGsB;AAI0B;AAE1C,SAAUI,gBAAgBA,CAAA;EAC/BC,MAAM,CAACC,gBAAgB,CAAE,SAAS,EAAEC,mBAAmB,EAAE,KAAK,CAAE;EAEhEL,2EAAoB,EAAE;EACtB,IAAMM,KAAK,GAAGP,iEAAY,CAAEQ,QAAQ,CAACC,QAAQ,CAACC,IAAI,CAAE,CACnD,mBAAmB,CACE;EACtB,IAAKH,KAAK,EAAG;IACZR,qEAAQ,CAAE;MAAM,OAAAG,2EAAoB,CAAE,mBAAmB,EAAEK,KAAK,CAAE;IAAlD,CAAkD,CAAE;GACpE,CAAC;AACH,CAAC,CAAC;AAaF,SAASD,mBAAmBA,CAAEK,OAAgB;EAC7C,IAAMC,MAAM,GAAGD,OAAO,CAACE,IAAI;EAC3B,IAAK,aAAa,MAAKD,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAEE,IAAI,GAAG;IACrC;GACA,CAAC;EAEF,IAAMC,KAAK,GAAGP,QAAQ,CAACQ,cAAc,CAAE,eAAe,CAAE;EACxD,IAAKD,KAAK,EAAG;IACZA,KAAK,CAACE,SAAS,GAAGL,MAAM,CAACL,KAAK;GAC9B,CAAC;AACH,CAAC,CAAC;;;;;;;;;;;;;;;;;;;;AChDF;;;AAGqC;AACO;AAC5C,iEAAeR,6DAAQ;;;;;;;;;;;;;;;;;ACLvB;;;;;;;;;;;;;;;;;;;;;;ACAA;;;AAGmD;AAE7C,SAAUoB,cAAcA,CAAEC,IAAY;EAC3C,OAAOF,iEAAY,CAAEE,IAAI,EAAE;IAC1BC,UAAU,EAAE,kBAAkB;IAC9BC,UAAU,EAAE,QAAQ;IACpBC,YAAY,EAAE;GACd,CAAE;AACJ,CAAC,CAAC;AAEI,SAAUC,cAAcA,CAAEJ,IAAY;EAC3C;EACA,IAAK,CAAE,cAAc,CAACK,IAAI,CAAEL,IAAI,CAAE,EAAG;IACpC,OAAO,KAAK;GACZ,CAAC;EAEFA,IAAI,GAAGA,IAAI,CAACM,OAAO,CAAE,cAAc,EAAE,SAAS,CAAE;EAChD,IAAMC,aAAa,GAAGnB,QAAQ,CAACC,QAAQ,CAACC,IAAI,CAC1CgB,OAAO,CAAE,cAAc,EAAE,EAAE,CAAE,CAC7BA,OAAO,CAAE,OAAO,EAAE,EAAE,CAAE;EACxB,IAAK,CAAC,KAAKN,IAAI,CAACQ,OAAO,CAAE,SAAS,GAAGD,aAAa,CAAE,EAAG;IACtD,OAAO,KAAK;GACZ,CAAC;EAEF,OAAO,IAAI;AACZ,CAAC,CAAC;AAEI,SAAU1B,oBAAoBA,CAAA;EACnC4B,KAAK,CAACC,IAAI,CAAEtB,QAAQ,CAACuB,gBAAgB,CAAE,GAAG,CAAE,CAAE,CAACC,OAAO,CAAE,UAAEZ,IAAI;IAC7D,IAAMV,IAAI,GAAGU,IAAI,CAACa,YAAY,CAAE,MAAM,CAAE,IAAI,EAAE;IAC9C,IAAK,CAAET,cAAc,CAAEd,IAAI,CAAE,EAAG;MAC/B;KACA,CAAC;IAEFU,IAAI,CAACc,SAAS,CAACC,GAAG,CAAE,mBAAmB,CAAE;IACzCf,IAAI,CAACf,gBAAgB,CAAE,OAAO,EAAE,UAAE+B,EAAE;MAAM,OAAAA,EAAE,CAACC,cAAc,EAAE;IAAnB,CAAmB,CAAE;EAChE,CAAC,CAAE;AACJ,CAAC,CAAC;AAEI,SAAUnC,oBAAoBA,CACnCoC,SAAiB,EACjBC,UAAsC;EAEtCV,KAAK,CAACC,IAAI,CAAEtB,QAAQ,CAACuB,gBAAgB,CAAE,GAAG,CAAE,CAAE,CAACC,OAAO,CAAE,UAAEZ,IAAI;;IAC7D,IAAMV,IAAI,GAAGU,IAAI,CAACa,YAAY,CAAE,MAAM,CAAE,IAAI,EAAE;IAC9C,IAAKT,cAAc,CAAEd,IAAI,CAAE,EAAG;MAC7B;KACA,CAAC;IAEF;IACA,IAAM8B,QAAQ,GAAG9B,IAAI,CAACgB,OAAO,CAAE,MAAM,EAAE,EAAE,CAAE;IAC3C,IAAMe,QAAQ,GAAG/B,IAAI,CAACgB,OAAO,CAAE,QAAQ,EAAE,EAAE,CAAE;IAC7C,IAAMgB,QAAQ,GACbxB,iEAAY,CAAEsB,QAAQ,GAAAG,EAAA,OAAIA,EAAA,CAAEL,SAAS,IAAIC,UAAU,aAAVA,UAAU,cAAVA,UAAU,GAAI,EAAE,EAAAI,EAAA,EAAI,GAC7DF,QAAQ;IAETrB,IAAI,CAACwB,YAAY,CAAE,MAAM,EAAEF,QAAQ,CAAE;EACtC,CAAC,CAAE;AACJ,CAAC,CAAC;;;;;;;;;;;;AC7DF;;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;UCAA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA;WACA,iCAAiC,WAAW;WAC5C;WACA;;;;;WCPA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;;;;;;;;;;;;;;;;;;;ACDA;;;AAGmD;AAEnD,IAAMG,MAAM,GAAG,SAAAA,CAAEC,CAAU;EAC1B,QAAC,CAAEA,CAAC,IAAI,QAAQ,KAAK,OAAOA,CAAC,IAAI,KAAK,IAAIA,CAAC;AAA3C,CAA2C;AAE5C;AACE1C,MAAuB,CAAC2C,GAAG,GAAAC,QAAA,CAAAA,QAAA,KACvBH,MAAM,CAAEzC,MAAM,CAAE,GAAGA,MAAM,CAAC2C,GAAG,GAAG,EAAI;EACzC5C,gBAAgB,EAAAA,4DAAAA;AAAA,EAChB,C","sources":["webpack://nab/./includes/hooks/experiments/css/assets/css-previewer/index.ts","webpack://nab/./packages/safe-wordpress/dom-ready.ts","webpack://nab/./packages/safe-wordpress/url.ts","webpack://nab/./packages/utils/links.ts","webpack://nab/./includes/hooks/experiments/css/assets/css-previewer/style.scss?1a76","webpack://nab/external window [\"wp\",\"domReady\"]","webpack://nab/external window [\"wp\",\"url\"]","webpack://nab/webpack/bootstrap","webpack://nab/webpack/runtime/compat get default export","webpack://nab/webpack/runtime/define property getters","webpack://nab/webpack/runtime/hasOwnProperty shorthand","webpack://nab/webpack/runtime/make namespace object","webpack://nab/./includes/hooks/experiments/css/assets/public.ts"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport domReady from '@safe-wordpress/dom-ready';\nimport { getQueryArgs } from '@safe-wordpress/url';\n\n/**\n * Internal dependencies\n */\nimport './style.scss';\nimport {\n\tdisableExternalLinks,\n\taddParamToLocalLinks,\n} from '../../../../../../packages/utils/links';\n\nexport function initCssPreviewer(): void {\n\twindow.addEventListener( 'message', previewCssInMessage, false );\n\n\tdisableExternalLinks();\n\tconst value = getQueryArgs( document.location.href )[\n\t\t'nab-css-previewer'\n\t] as unknown as string;\n\tif ( value ) {\n\t\tdomReady( () => addParamToLocalLinks( 'nab-css-previewer', value ) );\n\t} //end if\n} //end initCssPreviewer()\n\n// =======\n// HELPERS\n// =======\n\ntype Message = {\n\treadonly data?: {\n\t\treadonly type: 'css-preview';\n\t\treadonly value: string;\n\t};\n};\n\nfunction previewCssInMessage( message: Message ): void {\n\tconst action = message.data;\n\tif ( 'css-preview' !== action?.type ) {\n\t\treturn;\n\t} //end if\n\n\tconst style = document.getElementById( 'nab-css-style' );\n\tif ( style ) {\n\t\tstyle.innerHTML = action.value;\n\t} //end if\n} //end previewCssInMessage()\n","/**\n * WordPress dependencies\n */\nexport * from '@wordpress/dom-ready';\nimport domReady from '@wordpress/dom-ready';\nexport default domReady;\n","/**\n * WordPress dependencies\n */\nexport * from '@wordpress/url';\n","/**\n * WordPress dependencies\n */\nimport { addQueryArgs } from '@safe-wordpress/url';\n\nexport function addFreeTracker( link: string ): string {\n\treturn addQueryArgs( link, {\n\t\tutm_source: 'nelio-ab-testing',\n\t\tutm_medium: 'plugin',\n\t\tutm_campaign: 'free',\n\t} );\n} //end addFreeTracker()\n\nexport function isExternalLink( link: string ): boolean {\n\t// Internal link.\n\tif ( ! /^[a-z]+:\\/\\//.test( link ) ) {\n\t\treturn false;\n\t} //end if\n\n\tlink = link.replace( /^https?:\\/\\//, 'http://' );\n\tconst currentDomain = document.location.href\n\t\t.replace( /^https?:\\/\\//, '' )\n\t\t.replace( /\\/.*$/, '' );\n\tif ( 0 === link.indexOf( 'http://' + currentDomain ) ) {\n\t\treturn false;\n\t} //end if\n\n\treturn true;\n} //end isExternalLink()\n\nexport function disableExternalLinks(): void {\n\tArray.from( document.querySelectorAll( 'a' ) ).forEach( ( link ) => {\n\t\tconst href = link.getAttribute( 'href' ) || '';\n\t\tif ( ! isExternalLink( href ) ) {\n\t\t\treturn;\n\t\t} //end if\n\n\t\tlink.classList.add( 'nab-disabled-link' );\n\t\tlink.addEventListener( 'click', ( ev ) => ev.preventDefault() );\n\t} );\n} //end disableExternalLinks()\n\nexport function addParamToLocalLinks(\n\tparamName: string,\n\tparamValue?: number | string | boolean\n): void {\n\tArray.from( document.querySelectorAll( 'a' ) ).forEach( ( link ) => {\n\t\tconst href = link.getAttribute( 'href' ) || '';\n\t\tif ( isExternalLink( href ) ) {\n\t\t\treturn;\n\t\t} //end if\n\n\t\t// TODO. Remove fragment stuff when this pull request is finally merged: https://github.com/WordPress/gutenberg/pull/16656\n\t\tconst cleanUrl = href.replace( /#.*$/, '' );\n\t\tconst fragment = href.replace( /^[^#]*/, '' );\n\t\tconst finalUrl =\n\t\t\taddQueryArgs( cleanUrl, { [ paramName ]: paramValue ?? '' } ) +\n\t\t\tfragment;\n\n\t\tlink.setAttribute( 'href', finalUrl );\n\t} );\n} //end addParamToLocalLinks()\n","// extracted by mini-css-extract-plugin\nexport {};","module.exports = window[\"wp\"][\"domReady\"];","module.exports = window[\"wp\"][\"url\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\n * External dependencies\n */\nimport type { Dict } from '@nab/types';\n\n/**\n * Internal dependencies\n */\nimport { initCssPreviewer } from './css-previewer';\n\nconst hasNab = ( x: unknown ): x is { nab: Dict } =>\n\t!! x && 'object' === typeof x && 'nab' in x;\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\n( window as any as Dict ).nab = {\n\t...( hasNab( window ) ? window.nab : {} ),\n\tinitCssPreviewer,\n};\n"],"names":["domReady","getQueryArgs","disableExternalLinks","addParamToLocalLinks","initCssPreviewer","window","addEventListener","previewCssInMessage","value","document","location","href","message","action","data","type","style","getElementById","innerHTML","addQueryArgs","addFreeTracker","link","utm_source","utm_medium","utm_campaign","isExternalLink","test","replace","currentDomain","indexOf","Array","from","querySelectorAll","forEach","getAttribute","classList","add","ev","preventDefault","paramName","paramValue","cleanUrl","fragment","finalUrl","_a","setAttribute","hasNab","x","nab","__assign"],"sourceRoot":""}