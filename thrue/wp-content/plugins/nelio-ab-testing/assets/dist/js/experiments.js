(()=>{var e={d:(r,n)=>{for(var t in n)e.o(n,t)&&!e.o(r,t)&&Object.defineProperty(r,t,{enumerable:!0,get:n[t]})},o:(e,r)=>Object.prototype.hasOwnProperty.call(e,r),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},r={};(()=>{"use strict";e.r(r),e.d(r,{experiments:()=>i});var n={};e.r(n),e.d(n,{getExperimentSupport:()=>T,getExperimentType:()=>E,getExperimentTypes:()=>h,getExperimentView:()=>b,getHelpString:()=>w,hasExperimentSupport:()=>x});var t={};e.r(t),e.d(t,{addExperimentTypes:()=>P,removeExperimentTypes:()=>_});var i={};e.r(i),e.d(i,{STORE_NAME:()=>p,registerExperimentType:()=>u});const o=window.wp.data,a=window.lodash,s=window.nab.utils;var p="nab/experiments",l={experimentTypes:{}},c=function(){return c=Object.assign||function(e){for(var r,n=1,t=arguments.length;n<t;n++)for(var i in r=arguments[n])Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i]);return e},c.apply(this,arguments)};function u(e,r){var n=c({name:e,description:"",supports:{}},r);if("nab/heatmap"===e)return(0,o.dispatch)(p).addExperimentTypes(n),n;if("string"==typeof e)if(/^[a-z][a-z0-9-]*\/[a-z][a-z0-9-]*$/.test(e))if((0,o.select)(p).getExperimentType(e))console.error("Experiment type “".concat(e,"” is already registered."));else if(d(n))if(m(n))if(v(n))if(f(n))if((0,s.isValidIcon)(r.icon))if(g(n)){if(y(n))return(0,o.dispatch)(p).addExperimentTypes(n),n;console.error("The experiment “".concat(e,"” must specify original and alternative edit views."))}else console.error("The experiment “".concat(e,"” must specify original and alternative default values."));else console.error("The icon passed is invalid. The icon should be an element or a function.");else console.error("The experiment “".concat(e,"” must have an icon."));else console.error("The experiment “".concat(e,"” must have a title."));else console.error("The experiment “".concat(e,"” must have a valid category."));else console.error("The experiment “".concat(e,"” must provide help strings explaining the control version and its variants."));else console.error("Experiment type names must contain a namespace prefix, include only lowercase alphanumeric characters or dashes, and start with a letter. Example: my-plugin/my-custom-experiment");else console.error("Experiment type names must be strings.")}var d=function(e){return!!e.help&&"string"==typeof e.help.original&&!!e.help.original&&"string"==typeof e.help.alternative&&!!e.help.alternative},m=function(e){var r;return["page","global","woocommerce","other"].includes(null!==(r=e.category)&&void 0!==r?r:"")},v=function(e){return"string"==typeof e.title&&!!e.title},f=function(e){return"icon"in e},y=function(e){var r,n;return(0,a.isFunction)(null===(r=e.views)||void 0===r?void 0:r.original)&&(0,a.isFunction)(null===(n=e.views)||void 0===n?void 0:n.alternative)},g=function(e){var r,n;return(0,a.isObject)(null===(r=e.views)||void 0===r?void 0:r.original)&&(0,a.isObject)(null===(n=e.defaults)||void 0===n?void 0:n.alternative)};function h(e){return e.experimentTypes}function E(e,r){return e.experimentTypes[r]}function T(e,r,n){var t=O(e,r);return null==t?void 0:t.supports[n]}function x(e,r,n){return!!T(e,r,n)}function b(e,r,n){var t=O(e,r);if(t)return t.views[n]}function w(e,r,n){var t=O(e,r);return(null==t?void 0:t.help[n])||""}var O=function(e,r){return"string"==typeof r?E(e,r):r};function P(e){return{type:"ADD_EXPERIMENT_TYPES",experimentTypes:(0,a.castArray)(e)}}function _(e){return{type:"REMOVE_EXPERIMENT_TYPES",names:(0,a.castArray)(e)}}var S=function(){return S=Object.assign||function(e){for(var r,n=1,t=arguments.length;n<t;n++)for(var i in r=arguments[n])Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i]);return e},S.apply(this,arguments)};(0,o.registerStore)(p,{reducer:function(e,r){var n;return void 0===e&&(e=l),null!==(n=function(e,r){switch(r.type){case"ADD_EXPERIMENT_TYPES":return S(S({},e),{experimentTypes:S(S({},e.experimentTypes),(0,a.keyBy)(r.experimentTypes,"name"))});case"REMOVE_EXPERIMENT_TYPES":return S(S({},e),{experimentTypes:(0,a.omit)(e.experimentTypes,r.names)})}}(e,r))&&void 0!==n?n:e},selectors:n,actions:t})})();var n=nab="undefined"==typeof nab?{}:nab;for(var t in r)n[t]=r[t];r.__esModule&&Object.defineProperty(n,"__esModule",{value:!0})})();