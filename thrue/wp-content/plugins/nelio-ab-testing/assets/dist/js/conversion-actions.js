(()=>{var e={d:(n,o)=>{for(var t in o)e.o(o,t)&&!e.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:o[t]})},o:(e,n)=>Object.prototype.hasOwnProperty.call(e,n),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},n={};(()=>{"use strict";e.r(n),e.d(n,{conversionActions:()=>r});var o={};e.r(o),e.d(o,{getConversionActionType:()=>a,getConversionActionTypes:()=>c});var t={};e.r(t),e.d(t,{addConversionActionTypes:()=>u,removeConversionActionTypes:()=>p});var r={};e.r(r),e.d(r,{STORE_NAME:()=>f,createConversionAction:()=>C,registerConversionActionType:()=>S});const i=window.wp.data,s=window.lodash;function c(e){return(0,s.values)(e.conversionActionTypes)}function a(e,n){return e.conversionActionTypes[n]}function u(e){return{type:"ADD_CONVERSION_ACTION_TYPES",conversionActionTypes:(0,s.castArray)(e)}}function p(e){return{type:"REMOVE_CONVERSION_ACTION_TYPES",names:(0,s.castArray)(e)}}var l,f="nab/conversion-actions",d={conversionActionTypes:{}},y=function(){return y=Object.assign||function(e){for(var n,o=1,t=arguments.length;o<t;o++)for(var r in n=arguments[o])Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e},y.apply(this,arguments)};(0,i.registerStore)(f,{reducer:function(e,n){var o;return void 0===e&&(e=d),null!==(o=function(e,n){switch(n.type){case"ADD_CONVERSION_ACTION_TYPES":return y(y({},e),{conversionActionTypes:y(y({},e.conversionActionTypes),(0,s.keyBy)(n.conversionActionTypes,"name"))});case"REMOVE_CONVERSION_ACTION_TYPES":return y(y({},e),{conversionActionTypes:(0,s.omit)(e.conversionActionTypes,n.names)})}}(e,n))&&void 0!==o?o:e},selectors:o,actions:t});var v=new Uint8Array(16);function m(){if(!l&&!(l="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return l(v)}const g=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var h=[],T=0;T<256;++T)h.push((T+256).toString(16).substr(1));const b=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=(h[e[n+0]]+h[e[n+1]]+h[e[n+2]]+h[e[n+3]]+"-"+h[e[n+4]]+h[e[n+5]]+"-"+h[e[n+6]]+h[e[n+7]]+"-"+h[e[n+8]]+h[e[n+9]]+"-"+h[e[n+10]]+h[e[n+11]]+h[e[n+12]]+h[e[n+13]]+h[e[n+14]]+h[e[n+15]]).toLowerCase();if(!function(e){return"string"==typeof e&&g.test(e)}(o))throw TypeError("Stringified UUID is invalid");return o},O=function(e,n,o){var t=(e=e||{}).random||(e.rng||m)();if(t[6]=15&t[6]|64,t[8]=63&t[8]|128,n){o=o||0;for(var r=0;r<16;++r)n[o+r]=t[r];return n}return b(t)};var A=function(){return A=Object.assign||function(e){for(var n,o=1,t=arguments.length;o<t;o++)for(var r in n=arguments[o])Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e},A.apply(this,arguments)};function C(e,n){var o=(0,(0,i.select)(f).getConversionActionType)(e);if(o)return{id:O(),type:e,attributes:A(A({},o.attributes),n||{}),scope:o.scope}}const w=window.nab.utils;var _=function(){return _=Object.assign||function(e){for(var n,o=1,t=arguments.length;o<t;o++)for(var r in n=arguments[o])Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e},_.apply(this,arguments)};function S(e,n){if("string"==typeof e)if(/^[a-z][a-z0-9-]*\/[a-z][a-z0-9-]*$/.test(e))if((0,i.select)(f).getConversionActionType(e))console.error("Conversion action “".concat(e,"” is already registered."));else if(E(n))if(N(n))if(j(n))if(P(n))if(R(n))if((0,w.isValidIcon)(n.icon))if(V(n)){if(I(n)){var o=_({name:e},n);return(0,i.dispatch)(f).addConversionActionTypes(o),o}console.error("The “edit” property must be a valid function.")}else console.error("The “view” property must be a valid function.");else console.error("The icon passed is invalid. The icon should be an element or a function.");else console.error("The conversion action “".concat(e,"” must have an icon."));else console.error("Conversion action “".concat(e,"” should specify its default scope."));else console.error("Conversion action “".concat(e,"” should specify its default attributes."));else console.error("Conversion action “".concat(e,"” should specify a description."));else console.error("Conversion action “".concat(e,"” should specify a title."));else console.error("Conversion action names must contain a namespace prefix, include only lowercase alphanumeric characters or dashes, and start with a letter. Example: my-plugin/my-custom-conversion-action");else console.error("Conversion action names must be strings.")}var E=function(e){return"string"==typeof e.title&&!!e.title},N=function(e){return"string"==typeof e.description&&!!e.description},j=function(e){return!!e.attributes},P=function(e){return!!e.scope},R=function(e){return"icon"in e},V=function(e){return(0,s.isFunction)(e.view)},I=function(e){return(0,s.isFunction)(e.edit)}})();var o=nab="undefined"==typeof nab?{}:nab;for(var t in n)o[t]=n[t];n.__esModule&&Object.defineProperty(o,"__esModule",{value:!0})})();