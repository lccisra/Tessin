(()=>{var e={4184:(e,t)=>{var n;!function(){"use strict";var a={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var r=typeof n;if("string"===r||"number"===r)e.push(n);else if(Array.isArray(n)){if(n.length){var l=i.apply(null,n);l&&e.push(l)}}else if("object"===r){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var s in n)a.call(n,s)&&n[s]&&e.push(s)}}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()}},t={};function n(a){var i=t[a];if(void 0!==i)return i.exports;var r=t[a]={exports:{}};return e[a](r,r.exports,n),r.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var a={};(()=>{"use strict";n.r(a),n.d(a,{initPage:()=>Ie});const e=window.wp.element;function t(t,n){n&&(e.createRoot?(0,e.createRoot)(n).render(t):(0,e.render)(t,n))}const i=window.wp.data,r=window.wp.i18n,l=window.nab.data,s=window.nab.experimentLibrary,o=window.nab.utils,c=window.React;function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},u.apply(this,arguments)}const m=function(e){return c.createElement("svg",u({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 133.65 57.138"},e),c.createElement("path",{d:"M30.395 11.33c-1.34 0-2.642.15-3.894.438.084.284.175.617.293 1.038.164.517.285.885.366 1.102l2.596 8.592c.803-.035 1.621-.074 2.285-.093a53.932 53.932 0 0 1 1.567-.06c.53-.015.932-.024 1.204-.038.285-.014.6-.021.94-.021 2.121 0 3.843.281 5.175.838 1.346.558 2.306 1.297 2.877 2.222.571.91.86 1.908.86 2.996 0 .842-.187 1.647-.554 2.408-.353.748-.8 1.366-1.344 1.856a5.915 5.915 0 0 1-1.673 1.119 18.61 18.61 0 0 1-2.038.715c2.161.136 3.974.754 5.443 1.855.382.287.717.6 1 .94a17.275 17.275 0 0 0 2.25-8.553c0-9.585-7.768-17.354-17.353-17.354zm-7.797 1.847-.106.051-3.732 10.469h6.936l-3.098-10.52zm-2.272 1.37c-4.412 3.146-7.29 8.306-7.29 14.137 0 1.835.29 3.604.817 5.264.298-1.744.855-3.546 1.443-5.396.006-.02.017-.05.026-.072a.342.342 0 0 0 .004-.035l4.558-12.6c.08-.223.238-.684.442-1.298zm14.711 9.247c-.774 0-1.537.068-2.285.204v9.912h1.915c1.944 0 3.31-.451 4.098-1.362.802-.911 1.205-2.133 1.205-3.656 0-1.386-.387-2.585-1.162-3.591-.775-1.006-2.03-1.507-3.77-1.507zM18.475 25.37c-2.198 6.605 1.994 8.626 1.506 12.426-.207 1.616-1.252 2.408-2.421 2.57a17.326 17.326 0 0 0 10.013 5.443c.112-.049.207-.104.285-.17.272-.218.44-.605.507-1.162.08-.557.123-1.451.123-2.672v-6.686c-.036-1.147-.061-2.172-.532-3.936a41.161 41.161 0 0 0-.587-2.102l-1.12-3.711h-7.774Zm14.277 10.047v10.26c.231.014.481.033.753.06l.099.004a17.287 17.287 0 0 0 8.213-3.991c.045-.312.073-.64.073-.988a5.83 5.83 0 0 0-.553-2.447c-.353-.816-1.04-1.506-2.06-2.064-1.005-.557-2.398-.834-4.178-.834h-2.345zM50.46 14.055v14.513h2.405V16.477h8.432a1.26 1.26 0 0 1 1.258 1.255v10.836h2.422V16.586a2.526 2.526 0 0 0-2.532-2.531H50.461zm16.938 0v2.422h14.516v-2.422H67.398zm16.938 0v11.982a2.526 2.526 0 0 0 2.531 2.531H98.85v-2.422H88.014a1.258 1.258 0 0 1-1.256-1.255V14.055h-2.422zm16.918 0v14.513h2.422V14.055h-2.422zm7.357 0a2.504 2.504 0 0 0-2.511 2.511v9.489a2.506 2.506 0 0 0 2.511 2.513h9.489a2.519 2.519 0 0 0 2.513-2.513v-9.489a2.506 2.506 0 0 0-2.513-2.511h-9.489zm1.149 2.404h7.176c.692 0 1.238.564 1.238 1.256v7.176c0 .692-.546 1.238-1.238 1.238h-7.176a1.228 1.228 0 0 1-1.239-1.238v-7.176c0-.692.547-1.256 1.239-1.256zm-42.362 3.64v2.424h14.516V20.1H67.398zm0 6.047v2.422h14.516v-2.422H67.398z",style:{fill:"#d24633"}}),c.createElement("path",{d:"m53.3 30.166-.943.11v2.851h-2.09v.816h2.09V39.9c0 1.907.672 3.141 2.76 3.141.6 0 1.217-.2 1.834-.49l-.346-.799c-.49.236-1.033.4-1.505.4-1.526 0-1.8-.926-1.8-2.252v-5.957h3.325v-.816h-3.324v-2.961zm30.786 0-.943.11v2.851h-2.088v.816h2.088V39.9c0 1.907.671 3.141 2.76 3.141.599 0 1.216-.2 1.833-.49l-.345-.799c-.49.236-1.034.4-1.506.4-1.526 0-1.8-.926-1.8-2.252v-5.957h3.325v-.816h-3.324v-2.961zm7.978.021a.697.697 0 0 0-.709.709c0 .177.068.35.186.485l.006.006.004.006a.732.732 0 0 0 .513.214.711.711 0 0 0 .497-.214.712.712 0 0 0 .214-.497.678.678 0 0 0-.222-.498.71.71 0 0 0-.489-.21zm-16.74 2.74c-1.14 0-2.042.246-2.676.772-.608.503-.931 1.162-.931 1.914 0 .642.167 1.18.52 1.575l.003.003.002.002a3.18 3.18 0 0 0 1.252.797h.004l.004.002c.482.152 1.099.295 1.855.432l-.002-.002c.696.134 1.236.269 1.612.398l.004.002h.004c.372.113.671.296.914.55l.004.003.003.004c.234.224.354.524.354.959 0 .604-.217 1.038-.682 1.38v.003c-.455.323-1.207.508-2.261.508-.7 0-1.348-.113-1.948-.336h-.002c-.592-.238-1.057-.524-1.398-.854l-.188-.182-.496.663.137.14c.401.414.956.744 1.656.998.703.256 1.451.383 2.239.383 1.186 0 2.115-.224 2.775-.709l.002-.002c.652-.492.996-1.18.996-1.992 0-.618-.17-1.134-.523-1.504a2.887 2.887 0 0 0-1.221-.783c-.458-.153-1.062-.3-1.818-.45l-.002-.001h-.002c-.683-.122-1.229-.25-1.631-.38a2.353 2.353 0 0 1-.957-.57c-.237-.247-.362-.576-.362-1.037 0-.567.207-.988.65-1.332.447-.348 1.144-.543 2.11-.543.532 0 1.043.078 1.537.23.494.153.91.368 1.254.643l.186.149.496-.662-.17-.139c-.386-.32-.88-.565-1.479-.744a5.974 5.974 0 0 0-1.824-.287zm-11.072.018c-2.76 0-4.975 2.126-4.975 5.05 0 3.122 2.215 5.028 4.975 5.046 1.562 0 3.269-.636 4.213-1.889l-.69-.562c-.726.98-2.234 1.488-3.523 1.488-2.016 0-3.777-1.325-3.977-3.63h8.809c.381-3.814-2.072-5.503-4.832-5.503zm27.398.092v10.004h.83V33.037h-.83zm10.569.035c-1.362.018-2.742.58-3.487 1.924v-1.76h-.945v9.787h.234v.018h.37v-.018h.359v-5.447c0-2.015 1.416-3.542 3.432-3.56 2.124-.019 3.486 1.18 3.486 3.396v5.629h.963v-5.646c0-2.724-1.797-4.323-4.412-4.323zm13.22.233c-.92 0-1.762.206-2.511.619-.75.413-1.342 1-1.768 1.748-.427.738-.639 1.575-.639 2.496s.213 1.764.64 2.514a4.687 4.687 0 0 0 1.765 1.746l.002.002c.749.413 1.591.619 2.511.619 1.049 0 1.986-.271 2.788-.815.604-.412.95-1.032 1.3-1.648v1.752c0 1.366-.322 2.324-.927 2.918l-.002.002-.002.002c-.596.606-1.538.928-2.88.928a5.927 5.927 0 0 1-2.132-.374 4.836 4.836 0 0 1-1.676-1.056l-.162-.16-.576.576.15.164c.483.522 1.112.927 1.877 1.22h.002c.778.294 1.62.44 2.518.44 1.526 0 2.703-.38 3.484-1.174l.002-.002c.782-.783 1.154-1.978 1.154-3.539V33.36h-.83v2.381c-.35-.607-.698-1.218-1.302-1.62-.802-.543-1.738-.815-2.786-.815zm-51.187.529c2.36 0 3.94 1.345 3.959 3.76h-7.936c.218-2.397 1.961-3.76 3.977-3.76zm51.187.283c.79 0 1.486.175 2.102.524h.002l.002.002c.628.337 1.11.807 1.459 1.423s.523 1.312.523 2.102c0 .79-.176 1.492-.525 2.121a3.709 3.709 0 0 1-1.461 1.441c-.616.337-1.311.506-2.102.506-.79 0-1.494-.17-2.123-.507h-.002a3.744 3.744 0 0 1-1.439-1.442c-.349-.628-.523-1.33-.523-2.119 0-.79.174-1.486.523-2.102a3.61 3.61 0 0 1 1.441-1.423v-.002h.002c.63-.35 1.332-.524 2.121-.524z",style:{fill:"#60609f"}}))};var p=function(){return e.createElement("div",{className:"nab-heatmap-no-longer-available"},e.createElement(m,{className:"nab-heatmap-no-longer-available__logo",title:"Nelio A/B Testing",alt:"Nelio A/B Testing"}),e.createElement("h1",{className:"nab-heatmap-no-longer-available__title"},(0,r._x)("Heatmap not found","text","nelio-ab-testing")),e.createElement("p",{className:"nab-heatmap-no-longer-available__explanation"},(0,r._x)("Oops! It looks like your heatmap is no longer available. Please keep in mind that heatmap data is only stored up to two years in Nelio’s cloud.","user","nelio-ab-testing")))},d=function(){var t=(0,l.usePageAttribute)("heatmap/isProcessingData",!1)[0],n=b(),a=g();return(0,e.useEffect)((function(){a("ready"!==n||t)}),[n]),null},b=function(){return(0,i.useSelect)((function(e){var t,n;return null!==(n=null===(t=e(l.STORE_NAME).getPageAttribute("heatmap/dataStatus"))||void 0===t?void 0:t.mode)&&void 0!==n?n:""}))},g=function(){var e=(0,i.useDispatch)(l.STORE_NAME),t=e.lock,n=e.unlock;return function(e){return e?t():n()}},_=function(t){var n=t.experimentId,a=v(n);if(x(t),!a)return null;var i=t.children;return e.createElement("div",null,e.createElement(d,null),i)},v=function(e){return(0,i.useSelect)((function(t){return t(l.STORE_NAME).getExperiment(e)}))},x=function(t){var n=(0,i.useDispatch)(l.STORE_NAME).setPageAttribute;(0,i.useSelect)((function(e){return e(l.STORE_NAME).getExperimentResults(t.experimentId)})),(0,e.useEffect)((function(){var e=t.experimentId,a=t.alternativeIndex,i=t.firstDayOfWeek;n("editor/activeExperiment",e),n("heatmap/activeAlternative",a),n("heatmap/activeFilter","timeToClick"),n("heatmap/activeMode","heatmap"),n("heatmap/activeResolution","desktop"),n("heatmap/dataStatus",{mode:"waiting-script"}),n("heatmap/disabledFilterOptions",[]),n("heatmap/firstDayOfWeek",i%7),n("heatmap/intensity",60),n("heatmap/opacity",70),n("heatmap/progress",0)}),[])},h=n(4184),f=n.n(h),E=function(){return(0,i.useSelect)((function(e){var t=e(l.STORE_NAME),n=t.getPageAttribute,a=t.getExperiment,i=n("editor/activeExperiment");return a(null!=i?i:0)}))},y=function(){var e=N()[1],t=(0,l.usePageAttribute)("heatmap/activeFilter","timeToClick"),n=t[0],a=t[1];return[n,function(t){t!==n&&(e([]),a(t))}]},N=function(){return(0,l.usePageAttribute)("heatmap/disabledFilterOptions",[])},w=function(){var e=k(),t=e[0],n=e[1],a=(0,l.usePageAttribute)("heatmap/activeMode","heatmap"),i=a[0],r=a[1];return[i,function(e){e!==i&&(r(e),"confetti"===e&&"desktop"!==t&&n("desktop"))}]},A=function(){return(0,l.usePageAttribute)("heatmap/isSidebarVisible",!0)},k=function(){var e=(0,l.usePageAttribute)("heatmap/activeResolution","desktop"),t=e[0],n=e[1],a=(0,l.usePageAttribute)("heatmap/postMessageProxy",!1),i=(a[0],a[1]),r=(0,l.usePageAttribute)("heatmap/activeMode","heatmap")[0];return[t,function(e){e!==t&&(n(e),"scrollmap"!==r&&setTimeout((function(){return i({plugin:"nelio-ab-testing",type:"recompute-click-coordinates",mode:r})}),10))}]},S=function(){return(0,l.usePageAttribute)("isLocked",!1)[0]};const P=window.wp.components,O=window.wp.url,M=window.lodash;var T=function(){var t=C(),n=t[0],a=t[1],i=R(),l=D();if(!n||!i.length)return null;var s=i.map((function(e,t){return{value:e,label:(0,r.sprintf)(/* translators: variant letter */
(0,r._x)("Variant %s","text","nelio-ab-testing"),(0,o.getLetter)(t))}}));return e.createElement("div",{className:"nab-heatmap-results-header__variant"},e.createElement(P.SelectControl,{disabled:l,value:n,options:s,onChange:a}))},C=function(){var e=(0,i.useSelect)((function(e){return e(l.STORE_NAME).getPageAttribute("heatmap/activeAlternative")||0})),t=R(),n=t[e],a=(0,i.useDispatch)(l.STORE_NAME).setPageAttribute;return[n,function(e){var n=(0,M.indexOf)(t,e);a("heatmap/activeAlternative",n),a("heatmap/activeMode","heatmap");var i=(0,O.addQueryArgs)(document.location.href,{heatmap:n});window.history.replaceState({},"",i)}]},R=function(){var e=E();return"nab/heatmap"===(null==e?void 0:e.type)?[]:(0,M.map)(null==e?void 0:e.alternatives,"id")},D=function(){return(0,i.useSelect)((function(e){return!!e(l.STORE_NAME).getPageAttribute("editor/isExperimentBeingStopped")}))},B=function(){var t=z(),n=V(),a=W(),s=(0,l.usePageAttribute)("heatmap/postMessageProxy",!1),o=(s[0],s[1]),c=(0,l.usePageAttribute)("heatmap/progress",0)[0],u=(0,l.usePageAttribute)("editor/isExperimentBeingStopped",!1)[0],m=(0,i.useDispatch)(l.STORE_NAME).stopExperiment;return"loading"===a?e.createElement("div",{className:"nab-heatmap-results-sidebar__header-actions"},e.createElement(F,null)):"still-loading"===a?e.createElement("div",{className:"nab-heatmap-results-sidebar__header-actions"},e.createElement(F,null),e.createElement("div",{className:"nab-heatmap-results-sidebar__running-actions"},c?e.createElement("span",{className:"nab-heatmap-results-sidebar__progress"},(0,r.sprintf)(/* translators: percentage */
(0,r._x)("Fetching more data… (%1$d%%)","text","nelio-ab-testing"),Math.min(c,99))):e.createElement(P.Spinner,null),e.createElement(P.Button,{variant:"link",onClick:function(){return o({plugin:"nelio-ab-testing",type:"stop-result-loading",mode:"heatmap"})}},(0,r._x)("Cancel","command","nelio-ab-testing")))):e.createElement("div",{className:"nab-heatmap-results-sidebar__header-actions"},e.createElement(F,null),t&&n&&e.createElement("div",{className:"nab-heatmap-results-sidebar__running-actions"},e.createElement(P.Button,{variant:"primary",onClick:m,disabled:u,isBusy:u},u?(0,r._x)("Stopping…","text","nelio-ab-testing"):(0,r._x)("Stop","command","nelio-ab-testing"))),!t&&e.createElement("div",{className:"nab-heatmap-results-sidebar__alt-switcher"},e.createElement(T,null)))},F=function(){var t=I();return e.createElement("div",{className:"nab-heatmap-results-sidebar__back"},e.createElement("a",{className:"nab-heatmap-results-sidebar__back-link",href:t,title:(0,r._x)("Back…","command","nelio-ab-testing")},e.createElement(P.Dashicon,{icon:"arrow-left-alt2"})))},I=function(){var e=(0,l.useAdminUrl)("edit.php",{post_type:"nab_experiment"}),t=E();if(t)return"nab/heatmap"===t.type?e:t.links.edit},z=function(){var e;return"nab/heatmap"===(null===(e=E())||void 0===e?void 0:e.type)},V=function(){var e;return"running"===(null===(e=E())||void 0===e?void 0:e.status)},W=function(){var e=(0,l.usePageAttribute)("heatmap/dataStatus",{mode:"loading"})[0].mode;switch(e){case"ready":return"none";case"still-loading":return e;default:return"loading"}},j=function(){var t=A(),n=t[0],a=t[1],i=S(),l=k(),s=l[0],o=l[1],c="confetti"!==w()[0];return e.createElement("div",{className:"nab-heatmap-results-sidebar__footer-actions"},e.createElement("div",{className:f()({"nab-heatmap-results-sidebar__visibility-toggle":!0,"nab-heatmap-results-sidebar__visibility-toggle--hide":!!n,"nab-heatmap-results-sidebar__visibility-toggle--show":!n})},e.createElement(P.Button,{variant:"link",onClick:function(){return a(!n)}},n?e.createElement(e.Fragment,null,e.createElement(P.Dashicon,{icon:"admin-collapse"}),e.createElement("span",{className:"nab-heatmap-results-sidebar__visibility-toggle-label"},(0,r._x)("Hide Controls","command","nelio-ab-testing"))):e.createElement(P.Dashicon,{icon:"admin-collapse"}))),c&&e.createElement("div",{className:"nab-heatmap-results-sidebar__resolutions"},e.createElement("div",{className:f()({"nab-heatmap-results-sidebar__resolution":!0,"nab-heatmap-results-sidebar__resolution--is-active":"desktop"===s})},e.createElement(P.Button,{variant:"link",onClick:function(){return o("desktop")},disabled:i},e.createElement(P.Dashicon,{icon:"desktop"}),e.createElement("span",{className:"screen-reader-text"},(0,r._x)("Enter desktop preview mode","command","nelio-ab-testing")))),e.createElement("div",{className:f()({"nab-heatmap-results-sidebar__resolution":!0,"nab-heatmap-results-sidebar__resolution--is-active":"tablet"===s})},e.createElement(P.Button,{variant:"link",onClick:function(){return o("tablet")},disabled:i},e.createElement(P.Dashicon,{icon:"tablet"}),e.createElement("span",{className:"screen-reader-text"},(0,r._x)("Enter tablet preview mode","command","nelio-ab-testing")))),e.createElement("div",{className:f()({"nab-heatmap-results-sidebar__resolution":!0,"nab-heatmap-results-sidebar__resolution--is-active":"smartphone"===s})},e.createElement(P.Button,{variant:"link",onClick:function(){return o("smartphone")},disabled:i},e.createElement(P.Dashicon,{icon:"smartphone"}),e.createElement("span",{className:"screen-reader-text"},(0,r._x)("Enter mobile preview mode","command","nelio-ab-testing"))))))};const H=window.nab.i18n;var L=function(t){var n=t.clicks,a=t.views;return e.createElement(e.Fragment,null,e.createElement(P.PanelRow,{className:"nab-experiment-summary__pageviews"},e.createElement("span",null,(0,r._x)("Page Views","text","nelio-ab-testing")),e.createElement("span",null,void 0!==a?(0,H.compactInteger)(a):"-")),e.createElement(P.PanelRow,{className:"nab-experiment-summary__clicks"},e.createElement("span",null,(0,r._x)("Total Click Count","text","nelio-ab-testing")),e.createElement("span",null,void 0!==n?(0,H.compactInteger)(n):"-")))},U=function(t){var n=t.status;return e.createElement(P.PanelRow,{className:"nab-experiment-summary__status"},e.createElement("span",null,(0,r._x)("Status","text","nelio-ab-testing")),e.createElement("strong",null,function(e){switch(e){case"paused":return(0,r._x)("Paused","text (experiment status)","nelio-ab-testing");case"finished":return(0,r._x)("Finished","text (experiment status)","nelio-ab-testing");default:return(0,r._x)("Running","text (experiment status)","nelio-ab-testing")}}(n)))};const q=window.nab.date;var $=function(t){var n=t.start,a=t.end,i=t.endMode,l=t.endValue;return n&&i?(a=a||"",e.createElement(e.Fragment,null,e.createElement(P.PanelRow,{className:"nab-experiment-summary__start"},e.createElement("span",null,(0,r._x)("Duration","text","nelio-ab-testing")),e.createElement("span",null,function(e,t){for(var n=(0,o.computeDuration)(e,t),a=[n.months,n.days,n.hours,n.minutes],i=n.months,l=n.days,s=n.hours,c=n.minutes,u=[(0,r.sprintf)(/* translators: number of months */
(0,r._n)("%d month","%d months",i,"nelio-ab-testing"),i),/* translators: number of days */
(0,r.sprintf)((0,r._n)("%d day","%d days",l,"nelio-ab-testing"),l),(0,r.sprintf)(/* translators: number of hours */
(0,r._n)("%d hour","%d hours",s,"nelio-ab-testing"),s),(0,r.sprintf)(/* translators: number of minutes */
(0,r._n)("%d minute","%d minutes",c,"nelio-ab-testing"),c)],m=0;m<a.length-1;++m){if(a[m]&&a[m+1])return J(u[m],u[m+1]);if(a[m])return u[m]}return a[a.length-1]?u[a.length-1]:(0,r._x)("Less than a minute","text","nelio-ab-testing")}(n,a))),e.createElement(P.PanelRow,{className:"nab-experiment-summary__start"},e.createElement("span",null,(0,r._x)("Start","text","nelio-ab-testing")),e.createElement("span",null,(0,q.formatI18nDate)(n))),a?e.createElement(P.PanelRow,{className:"nab-experiment-summary__end"},e.createElement("span",null,(0,r._x)("End","text","nelio-ab-testing")),e.createElement("span",null,(0,q.formatI18nDate)(a))):e.createElement(P.PanelRow,{className:"nab-experiment-summary__end-mode"},e.createElement("span",null,(0,r._x)("End","text","nelio-ab-testing")),e.createElement("span",null,function(e,t){switch(t=null!=t?t:0,e){case"duration":return(0,r.sprintf)(/* translators: number of days */
(0,r._n)("After %s day","After %s days",t,"nelio-ab-testing"),(0,H.numberFormat)(t));case"page-views":return(0,r.sprintf)(/* translators: a number */
(0,r._n)("After %s page view","After %s page views",t,"nelio-ab-testing"),(0,H.numberFormat)(t));case"confidence":return(0,r.sprintf)(/* translators: a percentage number, such as “95” */
(0,r._x)("At %1$s%% confidence","text","nelio-ab-testing"),(0,H.numberFormat)(t));default:return(0,r._x)("Manual","text","nelio-ab-testing")}}(i,l))))):null};function J(e,t){if(!e&&!t)return"";if(!e||!t)return e||t;var n=(0,r._x)("and","text","nelio-ab-testing");return"".concat(e," ").concat(n," ").concat(t)}var Q=function(){return Q=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Q.apply(this,arguments)},Z=function(){var t=(0,l.useExperimentAttribute)("status","running"),n=K(),a=G(),i={start:(0,l.useExperimentAttribute)("startDate",""),end:(0,l.useExperimentAttribute)("endDate",!1),endMode:(0,l.useExperimentAttribute)("endMode","manual"),endValue:(0,l.useExperimentAttribute)("endValue",0)};return e.createElement(P.PanelBody,{className:"nab-experiment-summary",title:(0,r._x)("Summary","text (experiment)","nelio-ab-testing")},e.createElement(U,{status:t}),e.createElement(L,{views:n,clicks:a}),e.createElement($,Q({},i)))},G=function(){return(0,i.useSelect)((function(e){return e(l.STORE_NAME).getPageAttribute("heatmap/clickCount")}))},K=function(){return(0,i.useSelect)((function(e){var t,n,a=e(l.STORE_NAME),i=a.getExperiment,r=a.getPageAttribute,s=a.getAlternativePageViews,o=null!==(t=r("editor/activeExperiment"))&&void 0!==t?t:0,c=null!==(n=r("heatmap/activeAlternative"))&&void 0!==n?n:0,u=i(o),m=null==u?void 0:u.alternatives[c];return u&&m?s(u.id,m.id):0}))},X=function(){var t,n=("description",t=(0,i.useSelect)((function(e){return e(l.STORE_NAME).getPageAttribute("editor/activeExperiment")})),(0,i.useSelect)((function(e){return t?e(l.STORE_NAME).getExperimentAttribute(t,"description"):void 0})));return e.createElement(P.PanelBody,{className:"nab-experiment-description",title:(0,r._x)("Description","text","nelio-ab-testing")},n||(0,r._x)("None","text (description)","nelio-ab-testing"))},Y=function(){var t=S(),n=(0,l.usePageAttribute)("heatmap/opacity",70),a=n[0],i=n[1];return e.createElement(P.RangeControl,{disabled:t,className:"nab-heatmap-opacity",label:(0,r._x)("Opacity","text","nelio-ab-testing"),value:a,onChange:function(e){return i(null!=e?e:25)},min:25,max:75})},ee=function(){var t=S(),n=(0,l.usePageAttribute)("heatmap/intensity",60),a=n[0],i=n[1];return e.createElement(P.RangeControl,{disabled:t,className:"nab-heatmap-intensity",label:(0,r._x)("Heat Intensity","text","nelio-ab-testing"),value:a,onChange:function(e){return i(e||40)},min:40,max:100})},te=function(){return e.createElement(P.BaseControl,{id:"nab-scrollmap-legend",className:"nab-scrollmap-legend",label:(0,r._x)("Scrollmap Legend","text","nelio-ab-testing")},e.createElement("div",{className:"nab-scrollmap-legend__container"},e.createElement("div",{className:"nab-scrollmap-legend__scale"},e.createElement("div",{className:"nab-scrollmap-legend__percent nab-scrollmap-legend__percent--0"}),e.createElement("div",{className:"nab-scrollmap-legend__percent nab-scrollmap-legend__percent--25"}),e.createElement("div",{className:"nab-scrollmap-legend__percent nab-scrollmap-legend__percent--50"}),e.createElement("div",{className:"nab-scrollmap-legend__percent nab-scrollmap-legend__percent--75"}),e.createElement("div",{className:"nab-scrollmap-legend__percent nab-scrollmap-legend__percent--100"})),e.createElement("div",{className:"nab-scrollmap-legend__text"},e.createElement("span",null,(0,r._x)("Less popular","text","nelio-ab-testing")),e.createElement("span",null,(0,r._x)("More popular","text","nelio-ab-testing")))))};const ne=window.wp.compose;var ae=function(t){var n=t.label,a=t.className,i=t.heading,r=t.checked,l=t.onChange,s=t.color,o=t.disabled,c=(0,ne.useInstanceId)(ae),u="inspector-checkbox-control-".concat(c),m=s?{borderColor:s,backgroundColor:s,opacity:r?1:.5}:{};return e.createElement(P.BaseControl,{label:i,id:u,className:a},e.createElement("span",{className:"components-checkbox-control__input-container"},e.createElement("input",{id:u,style:m,className:"components-checkbox-control__input",type:"checkbox",value:"1",onChange:function(e){return l(!!e.target.checked)},checked:r,disabled:o}),r?e.createElement(P.Dashicon,{icon:"yes",className:"components-checkbox-control__checked",role:"presentation"}):null),e.createElement("label",{className:"components-checkbox-control__label",htmlFor:u},n))},ie=function(){return ie=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},ie.apply(this,arguments)},re=function(e,t,n){if(n||2===arguments.length)for(var a,i=0,r=t.length;i<r;i++)!a&&i in t||(a||(a=Array.prototype.slice.call(t,0,i)),a[i]=t[i]);return e.concat(a||Array.prototype.slice.call(t))},le=function(){var t=S(),n=se(),a=oe(),i=ce();if(!n)return null;var l=(0,M.sum)((0,M.map)(n,"value"));return e.createElement(e.Fragment,null,e.createElement(P.CheckboxControl,{className:"nab-filter-option nab-filter-option--header",label:e.createElement("span",{className:"nab-filter-option-label__container"},e.createElement("span",{className:"nab-filter-option-label__name"},(0,r._x)("Name","text","nelio-ab-testing")),e.createElement("span",{className:"nab-filter-option-label__amount"},(0,r._x)("Amount","text","nelio-ab-testing"))),checked:!a.length,onChange:function(e){return i("all",e)},disabled:t}),n.map((function(n){var r=n.key,s=n.label,o=n.value,c=n.color;return e.createElement(ae,{key:r,color:c,disabled:t,className:f()("nab-filter-option",{"nab-filter-option--deactivated":a.includes(r)}),label:e.createElement("span",{className:"nab-filter-option-label__container"},e.createElement("span",{className:"nab-filter-option-label__name",title:s},s),e.createElement("span",{className:"nab-filter-option-label__amount-container"},e.createElement("span",{className:"nab-filter-option-label__value"},"number"==typeof o?(0,H.compactInteger)(o):o),e.createElement("span",{className:"nab-bar__container"},e.createElement("span",{className:"nab-bar__value",style:{width:"".concat((me(o)/l*100).toFixed(2),"%")}})))),checked:!a.includes(r),onChange:function(e){return i(r,e)}})})))},se=function(){return(0,i.useSelect)((function(e){var t,n,a=e(l.STORE_NAME).getPageAttribute,i=null!==(t=a("heatmap/activeFilter"))&&void 0!==t?t:"timeToClick",s=a("heatmap/confettiFilterOptions")||{},c=(0,M.values)(s[i]);if("dayOfWeek"===i){var u=(null!==(n=a("heatmap/firstDayOfWeek"))&&void 0!==n?n:0)%7;c=re(re([],re([],c,!0).splice(u),!0),re([],c,!0).splice(0,u),!0)}return"country"===i&&(c=c.map((function(e){return ie(ie({},e),{label:"other"===e.key?(0,r._x)("Other","text","nelio-ab-testing"):(0,o.getCountryName)(e.key)})})),c=ue(c)),c}))},oe=function(){return(0,i.useSelect)((function(e){var t;return null!==(t=e(l.STORE_NAME).getPageAttribute("heatmap/disabledFilterOptions"))&&void 0!==t?t:[]}))},ce=function(){var e=(0,i.useDispatch)(l.STORE_NAME).setPageAttribute,t=se(),n=oe();return(0,i.useSelect)((function(e){return e(l.STORE_NAME).getPageAttribute("heatmap/activeFilter")}))&&t.length?function(a,i){if("all"===a)return e("heatmap/disabledFilterOptions",i?[]:(0,M.map)(t,"key"));e("heatmap/disabledFilterOptions",i?(0,M.without)(n,a):(0,M.uniq)(re(re([],n,!0),[a],!1)))}:M.noop},ue=function(e){return(0,M.sortBy)(re([],e,!0),["label"])},me=function(e){return"string"==typeof e?Number.parseInt(e)||0:e},pe=function(t){return"confetti"===t.kind?e.createElement(de,null):null},de=function(){var t=S(),n=y(),a=n[0],i=n[1],l=be();return e.createElement(e.Fragment,null,e.createElement(P.SelectControl,{disabled:t,label:(0,r._x)("Filter","text","nelio-ab-testing"),value:a,onChange:function(e){return i(e)},options:l}),e.createElement(le,null))},be=function(){return ge},ge=(0,M.sortBy)([{value:"country",label:(0,r._x)("Country","text","nelio-ab-testing")},{value:"device",label:(0,r._x)("Device Type","text","nelio-ab-testing")},{value:"os",label:(0,r._x)("Operating System","text","nelio-ab-testing")},{value:"browser",label:(0,r._x)("Browser","text","nelio-ab-testing")},{value:"dayOfWeek",label:(0,r._x)("Day of Week","text","nelio-ab-testing")},{value:"hourOfDay",label:(0,r._x)("Time of Day","text","nelio-ab-testing")},{value:"timeToClick",label:(0,r._x)("Time to Click","text","nelio-ab-testing")},{value:"windowWidth",label:(0,r._x)("Window Width","text","nelio-ab-testing")}],"label"),_e=function(){var t=w(),n=t[0],a=t[1],i=S();return e.createElement(ve,{className:f()("nab-heatmap-kind-selector",{"nab-heatmap-kind-selector--locked":i}),activeClass:"nab-heatmap-kind-selector__tab--active",orientation:"horizontal",tabs:xe,activeTab:n,onSelect:a},(function(t){return e.createElement(P.PanelBody,{className:"nab-heatmap-settings",title:(0,r._x)("Settings","text","nelio-ab-testing")},e.createElement(Y,null),"heatmap"===t.name&&e.createElement(ee,null),e.createElement(pe,{kind:t.name}),"scrollmap"===t.name&&e.createElement(te,null))}))},ve=function(t){var n=t.className,a=t.activeClass,i=t.orientation,r=t.onSelect,l=t.children,s=t.activeTab,o=t.tabs;return e.createElement("div",{className:n},e.createElement("div",{role:"tablist","aria-orientation":i,className:"components-tab-panel__tabs"},o.map((function(t){var n;return e.createElement("button",{key:t.name,type:"button",role:"tab",tabIndex:t.name===s?-1:void 0,"aria-selected":"false",id:"tab-panel-1-".concat(t.name),"aria-controls":"tab-panel-1-".concat(t.name,"-view"),className:f()((n={"components-button components-tab-panel__tabs-item":!0},n[t.className]=!0,n[a]=t.name===s,n)),onClick:function(){return r(t.name)}},t.title)}))),e.createElement("div",{"aria-labelledby":"tab-panel-1-".concat(s||o[0].name),role:"tabpanel",id:"tab-panel-1-".concat(s||o[0].name,"-view"),className:"components-tab-panel__tab-content"},l(o.find((function(e){return e.name===s}))||o[0])))},xe=[{name:"heatmap",title:(0,r._x)("Heatmap","text","nelio-ab-testing"),className:"nab-heatmap-kind-selector__tab"},{name:"scrollmap",title:(0,r._x)("Scrollmap","text","nelio-ab-testing"),className:"nab-heatmap-kind-selector__tab"},{name:"confetti",title:(0,r._x)("Confetti","text","nelio-ab-testing"),className:"nab-heatmap-kind-selector__tab"}],he=function(){var t=S(),n=fe(),a=Ee();return n?e.createElement(P.PanelBody,{initialOpen:!1,className:"nab-advanced",title:(0,r._x)("Advanced","text","nelio-ab-testing")},e.createElement("p",null,(0,r._x)("Under some circumstances, when your page loads content dynamically, the results may be shifted from their correct position. Reset the view to re-render the results properly:","user","nelio-ab-testing")),e.createElement(P.Button,{className:"nab-advanced__reposition-button",disabled:t,variant:"secondary",onClick:a},(0,r._x)("Reset View","command","nelio-ab-testing"))):null},fe=function(){return(0,i.useSelect)((function(e){return"scrollmap"!==e(l.STORE_NAME).getPageAttribute("heatmap/activeMode")}))},Ee=function(){var e=(0,l.usePageAttribute)("heatmap/activeMode","heatmap")[0],t=(0,i.useDispatch)(l.STORE_NAME).setPageAttribute;return function(){return"scrollmap"!==e&&t("heatmap/postMessageProxy",{plugin:"nelio-ab-testing",type:"recompute-click-coordinates",mode:e})}},ye=function(t){var n=t.className;return e.createElement("div",{className:f()(["nab-heatmap-results-sidebar",n])},e.createElement(B,null),e.createElement("div",{className:"nab-heatmap-results-sidebar__wrapper"},e.createElement(_e,null),e.createElement(Z,null),e.createElement(X,null),e.createElement(he,null)),e.createElement(j,null))};const Ne=window.nab.components;var we=function(t){var n=t.className,a=t.contentUrl,i=(0,ne.useInstanceId)(we);Me(i),Pe(i),Oe(i),Te(i);var l=k()[0],s=Se();return e.createElement("div",{className:n},e.createElement(Ae,null),e.createElement("iframe",{id:"nab-heatmap-results__iframe-".concat(i),className:"nab-heatmap-results__iframe nab-heatmap-results__iframe--".concat(l),title:(0,r._x)("Content of the heatmap","text","nelio-ab-testing"),src:a,onLoad:function(){return s()}}))},Ae=function(){var t=(0,l.usePageAttribute)("heatmap/isProcessingData",!1)[0],n=ke();return n?t?e.createElement("div",{className:"nab-heatmap-results__loader"},e.createElement(Ne.LoadingAnimation,{text:(0,r._x)("Processing results…","text","nelio-ab-testing")})):"still-loading"===n.mode||"ready"===n.mode?null:"error"===n.mode?e.createElement("div",{className:"nab-heatmap-results__loader"},e.createElement(Ne.BigError,{text:Re(n.rationale)}),"promise-failed"===n.rationale&&e.createElement("div",{className:"nab-heatmap-results__adblock-explanation"},(0,r._x)("If you’re using an adblocker on your browser, please disable it as it’s probably blocking Nelio A/B Testing’s requests, thus preventing the plugin from pulling your heatmap data.","user","nelio-ab-testing"))):e.createElement("div",{className:"nab-heatmap-results__loader"},e.createElement(Ne.LoadingAnimation,{text:"loading"===n.mode?(0,r._x)("Fetching results…","text","nelio-ab-testing"):(0,r._x)("Loading page…","text","nelio-ab-testing")})):null},ke=function(){return(0,i.useSelect)((function(e){return e(l.STORE_NAME).getPageAttribute("heatmap/dataStatus")}))},Se=function(){var e=(0,i.useDispatch)(l.STORE_NAME).setPageAttribute;return function(){setTimeout((function(){var t=(0,(0,i.select)(l.STORE_NAME).getPageAttribute)("heatmap/dataStatus");"waiting-script"===(null==t?void 0:t.mode)&&e("heatmap/dataStatus",{mode:"error",rationale:"no-script"})}),3e4)}},Pe=function(t){var n=Ce(t),a=w()[0],i=(0,l.usePageAttribute)("heatmap/opacity",70)[0];(0,e.useEffect)((function(){n({plugin:"nelio-ab-testing",type:"update-opacity",mode:a,value:i})}),[i])},Oe=function(t){var n=Ce(t),a=(0,l.usePageAttribute)("heatmap/intensity",70)[0];(0,e.useEffect)((function(){n({plugin:"nelio-ab-testing",type:"update-intensity",mode:"heatmap",value:a})}),[a])},Me=function(t){var n=Ce(t),a=(0,l.usePageAttribute)("heatmap/postMessageProxy",!1),i=a[0],r=a[1];(0,e.useEffect)((function(){i&&(n(i),r(!1))}),[i])},Te=function(t){var n=Ce(t),a=y()[0],i=w()[0],r=k()[0],l=N()[0];(0,e.useEffect)((function(){n({plugin:"nelio-ab-testing",type:"render-results",mode:i})}),[a,i,r,JSON.stringify(l)])},Ce=function(e){return function(t){var n,a="nab-heatmap-results__iframe-".concat(e),i=document.getElementById(a);(null===(n=null==i?void 0:i.contentWindow)||void 0===n?void 0:n.postMessage)&&i.contentWindow.postMessage(t)}};function Re(e){switch(e){case"no-script":return(0,r._x)("Unable to render heatmap","text","nelio-ab-testing");case"experiment-not-found":return(0,r._x)("Experiment not found","text","nelio-ab-testing");case"alternative-not-found":return(0,r._x)("Page not found","text","nelio-ab-testing");case"promise-failed":return(0,r._x)("There was an error when retrieving data from the cloud","text","nelio-ab-testing");case"unknown":return(0,r._x)("Something went wrong","text","nelio-ab-testing")}}var De=function(){var t=A()[0],n=Be();return e.createElement("div",{className:"nab-heatmap-results"},e.createElement(ye,{className:f()({"nab-heatmap-results__sidebar":!0,"nab-heatmap-results__sidebar--is-collapsed":!t})}),e.createElement(we,{key:"nab-heatmap-results__content",className:f()({"nab-heatmap-results__content":!0,"nab-heatmap-results__content--is-fullscreen":!t}),contentUrl:n}))},Be=function(){return(0,i.useSelect)((function(e){var t=e(l.STORE_NAME),n=t.getPageAttribute,a=t.getExperiment,i=n("editor/activeExperiment"),r=a(null!=i?i:0);if(r){if(Fe(r))return r.links.heatmap;var s=n("heatmap/activeAlternative")||0,o=r.alternatives[s];return null==o?void 0:o.links.heatmap}}))},Fe=function(e){return"nab/heatmap"===e.type};function Ie(n,a){var c=document.getElementById(n);if((0,o.isExperimentTooOldToHaveHeatmaps)(a.endDate||""))return t(e.createElement(e.StrictMode,null,e.createElement(p,null)),c);var u=a.experimentId,m=a.alternativeIndex,d=a.isStaging,b=a.firstDayOfWeek;d&&(0,o.createStagingNotice)(),ze.nabI18n={averageFold:(0,r._x)("Average Fold:","text","nelio-ab-testing"),clicksAbove:(0,r._x)("Clicks above:","text","nelio-ab-testing"),popularity:(0,r._x)("Popularity:","text","nelio-ab-testing"),other:(0,r._x)("Other","text","nelio-ab-testing"),unknown:(0,r._x)("unknown","text","nelio-ab-testing"),dayOfWeek:{sunday:(0,r._x)("Sunday","text","nelio-ab-testing"),monday:(0,r._x)("Monday","text","nelio-ab-testing"),tuesday:(0,r._x)("Tuesday","text","nelio-ab-testing"),wednesday:(0,r._x)("Wednesday","text","nelio-ab-testing"),thursday:(0,r._x)("Thursday","text","nelio-ab-testing"),friday:(0,r._x)("Friday","text","nelio-ab-testing"),saturday:(0,r._x)("Saturday","text","nelio-ab-testing")},hourOfDay:{"12a - 2a":(0,r._x)("12a - 2a","text","nelio-ab-testing"),"2a - 4a":(0,r._x)("2a - 4a","text","nelio-ab-testing"),"4a - 6a":(0,r._x)("4a - 6a","text","nelio-ab-testing"),"6a - 8a":(0,r._x)("6a - 8a","text","nelio-ab-testing"),"8a - 10a":(0,r._x)("8a - 10a","text","nelio-ab-testing"),"10a - 12p":(0,r._x)("10a - 12p","text","nelio-ab-testing"),"12p - 2p":(0,r._x)("12p - 2p","text","nelio-ab-testing"),"2p - 4p":(0,r._x)("2p - 4p","text","nelio-ab-testing"),"4p - 6p":(0,r._x)("4p - 6p","text","nelio-ab-testing"),"6p - 8p":(0,r._x)("6p - 8p","text","nelio-ab-testing"),"8p - 10p":(0,r._x)("8p - 10p","text","nelio-ab-testing"),"10p - 12a":(0,r._x)("10p - 12a","text","nelio-ab-testing")},timeToClick:{"0 - 2s":(0,r._x)("0 - 2s","text","nelio-ab-testing"),"2 - 3s":(0,r._x)("2 - 3s","text","nelio-ab-testing"),"3 - 4s":(0,r._x)("3 - 4s","text","nelio-ab-testing"),"4 - 5s":(0,r._x)("4 - 5s","text","nelio-ab-testing"),"5 - 10s":(0,r._x)("5 - 10s","text","nelio-ab-testing"),"10 - 15s":(0,r._x)("10 - 15s","text","nelio-ab-testing"),"15 - 20s":(0,r._x)("15 - 20s","text","nelio-ab-testing"),"20 - 25s":(0,r._x)("20 - 25s","text","nelio-ab-testing"),"25 - 30s":(0,r._x)("25 - 30s","text","nelio-ab-testing"),"30 - 60s":(0,r._x)("30 - 60s","text","nelio-ab-testing"),"1 - 2min":(0,r._x)("1 - 2min","text","nelio-ab-testing"),"2 - 3min":(0,r._x)("2 - 3min","text","nelio-ab-testing"),"3 - 5min":(0,r._x)("3 - 5min","text","nelio-ab-testing"),"+5min":(0,r._x)("+5min","text","nelio-ab-testing")},windowWidth:{"< 300 px":(0,r._x)("< 300 px","text","nelio-ab-testing"),"300 - 600px":(0,r._x)("300 - 600px","text","nelio-ab-testing"),"600 - 900px":(0,r._x)("600 - 900px","text","nelio-ab-testing"),"900 - 1200px":(0,r._x)("900 - 1200px","text","nelio-ab-testing"),"1200 - 1500px":(0,r._x)("1200 - 1500px","text","nelio-ab-testing"),"1500 - 1800px":(0,r._x)("1500 - 1800px","text","nelio-ab-testing"),"1800 - 2100px":(0,r._x)("1800 - 2100px","text","nelio-ab-testing"),"+2100px":(0,r._x)("+2100px","text","nelio-ab-testing")}},function(e){(0,i.dispatch)(l.STORE_NAME).setPageAttribute("heatmap/awsAuthToken",e.awsAuthToken),(0,i.dispatch)(l.STORE_NAME).setPageAttribute("heatmap/siteId",e.siteId),(0,i.dispatch)(l.STORE_NAME).setPageAttribute("heatmap/timezone",e.timezone)}(a),(0,s.registerCoreExperiments)(),t(e.createElement(e.StrictMode,null,e.createElement(_,{experimentId:u,alternativeIndex:m,firstDayOfWeek:b},e.createElement(De,null))),c)}var ze=window})();var i=nab="undefined"==typeof nab?{}:nab;for(var r in a)i[r]=a[r];a.__esModule&&Object.defineProperty(i,"__esModule",{value:!0})})();